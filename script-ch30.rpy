


default persistent.monikatopics = []
default persistent.newtopics = []
default persistent.monika_reload = 0
default persistent.tried_skip = None
default persistent.monika_kill = None
default monika_cutscene = False
default persistent.natsuki_like = 0
default persistent.seen_waves = False
default persistent.seen_castle = False
default persistent.newart = False
default persistent.seen_walk = False
default persistent.prologue = None
default persistent.seen_scrubpai_event = False
default persistent.seen_marisu_event = False
default persistent.birthday = None
default persistent.natsuki_love = False
default persistent.random_talk = True
default persistent.youtuber_mode = False
default persistent.natsuki_emotion = "Casual"
default persistent.yuri_is_a_bitch = True
default persistent.repeat_topics = True
default persistent.seen_zero_event = False
default persistent.seen_zero_event3 = False
default persistent.given_returnchoice = False
default persistent.dont_show = False
default persistent.mentioned_jy = False
default persistent.other_bg = False
default persistent.anime_search = False
default persistent.anniversary = None
default persistent.seen_anniversary_start = False
default time_alone = 10
default persistent.room_animated = True
default persistent.show_again = True
default time_fed = 0
default persistent.track_1 = "Track 1"
default persistent.track_2 = "Track 2"
default persistent.track_3 = "Track 3"
default persistent.first_morning = True
default persistent.yandere = False
default persistent.yantopics = []
default persistent.yantopics_seen = []
default persistent.natsuki_save = False
default persistent.save_music_place = True
default persistent.monika_persistent = False
default persistent.seen_event = False
default persistent.christmas = True
default persistent.has_flower = False
default persistent.has_coco = False
default persistent.has_misletoe = False
default persistent.seen_monikaevent = False
default persistent.one_year = False
default persistent.seen_valentine = False
default time_of_day = ""
default persistent.new_topics = False
default persistent.first_shutdown = True
default persistent.has_chocolate = False
default persistent.seen_valentine_start = False
default persistent.newemotion_startup = True
default persistent.dynamic_emotions = True
default persistent.bday_month = 0
default persistent.bday_day = 0
default persistent.bday_year = 0
default persistent.natsuki_left = False
default persistent.anitopics = []
default persistent.anitopics_seen = []
default persistent.christmastopics = []
default persistent.current_christmastopic = []
default persistent.seen_anievent = False
default persistent.seen_spookystory = False
default persistent.wearing = ""
default persistent.lights = False
default persistent.seen_rawrevent = False
default persistent.christmas_time = ""
default persistent.did_wrap = False
default persistent.present1 = 0
default persistent.present2 = 0
default persistent.present3 = 0
default persistent.has_silver = False
default persistent.has_pjs = False
default persistent.seen_chsritmas = False
default persistent.seen_plan = False
default persistent.natsuki_romance = 0
default persistent.head_accessory = ""
default persistent.player_gender = "" #Used to identify the player's gender.
default persistent.player_pronouns = "" #Used for primary pronouns like He/She/Them
default persistent.player_pronouns2 = "" #Used for secondary pronouns like Him/Her/Them
default persistent.player_pronouns3 = "" #Used for possessive pronoun like His/Hers/Theirs
default persistent.two_years = False
default persistent.seen_two_years = False
default persistent.candels_blown = False
default persistent.mentioned_song = False
default persistent.flag = ""
default persistent.seen_thoughts = False
default persistent.date = ""
default persistent.background_day = "beach"
default persistent.background_night = "space"
default persistent.seen_halloween3 = False

image nend = "mod_assets/natsukidelete.png"
image n2 = "mod_assets/natsukiroom.png"
image nstill = "mod_assets/natsukiartstill.png"
image pool = "mod_assets/pool.png"
image space = "mod_assets/space.png"
image partyhat = "mod_assets/JustNatsuki/partyhat.png"
image cake = "mod_assets/JustNatsuki/cake.png"
image cemetary = "mod_assets/locations/cemetary/cemetary.png"
image ears = "mod_assets/JustNatsuki/ears.png"
image flower = "mod_assets/JustNatsuki/flower.png"
image misletoe = "mod_assets/JustNatsuki/misletoe.png"
image room_day = "mod_assets/locations/clubroom/natsuki_day_room.png"
image shade = "mod_assets/JustNatsuki/shade.png"
image shade2 = "mod_assets/JustNatsuki/shade2.png"
image shade3 = "mod_assets/JustNatsuki/shade3.png"
image kitchenoverlay = "mod_assets/emptykitchen.png"
image clothes jhollow = "mod_assets/JustNatsuki/whichcostume.png"
image whichhat = "mod_assets/JustNatsuki/whichhat.png"
image clothes juni = "mod_assets/JustNatsuki/uniform.png"
image cabin_interior = "mod_assets/locations/cabin/cabin.png"
image clothes jchris = "mod_assets/JustNatsuki/christmascostume.png"
image decorations = "mod_assets/locations/clubroom/decorations.png"
image clothes jmaid = "mod_assets/JustNatsuki/maidoutfit.png"
image base 1a = "mod_assets/JustNatsuki/base.png"
image clothes jbikini = "mod_assets/JustNatsuki/bikini.png"
image clothes jbeach = "mod_assets/JustNatsuki/beach.png"
image clothes jdress = "mod_assets/JustNatsuki/dress.png"
image clothes jwhitetank = "mod_assets/JustNatsuki/whitetank.png"
image accessory jglasses = "mod_assets/JustNatsuki/glasses.png"
image accessory jmask = "mod_assets/JustNatsuki/mask.png"
image flag gay = "mod_assets/room_decor/gay.png" #Boys will love boys.
image flag lesbian = "mod_assets/room_decor/lesbian.png" #Men is too headache.
image flag trans = "mod_assets/room_decor/trans.png" #That's me!
image flag enby = "mod_assets/room_decor/enby.png" #For those who have ascended beyond the gender plane!
image flag bi = "mod_assets/room_decor/bisexual.png" #For people who love more than one gender!
image flag pan = "mod_assets/room_decor/pan.png" #For people who love all genders. Look the distinction is important to some okay!
image flag asexual = "mod_assets/room_decor/asexual.png" #Sex can be a headache.
image flag blm = "mod_assets/room_decor/blm.png" #Support black people in this important time. They need it.
image garland_day = "mod_assets/room_decor/bell_garland_day.png"
image garland_night = "mod_assets/room_decor/bell_garland_space.png"
image tree_day = "mod_assets/room_decor/xmas_tree_day.png"
image tree_night = "mod_assets/room_decor/xmas_tree_space.png"
#Why am I writing these notes? No one is gunna read em...
image plate = "mod_assets/JustNatsuki/plate.png"
image cakelit = "mod_assets/JustNatsuki/cakelit.png"
image n_kitchen = "mod_assets/locations/kitchen/kitchen.png"
image jumptext:
    ypos credits_ypos + 250
    xoffset 0
    "black"
    0.0
    Text("Please adjust your volume to max for a better experience.", style="monika_credits_text") with ImageDissolve("images/menu/wipeleft.png", 10.0, ramplen=4, alpha=False)


image exception_bg = "#dadada"
image fake_exception = Text("An exception has occurred.", size=40, style="_default")
image fake_exception2 = Text("File \"characters/sayori.chr\",\nSee traceback.txt for details.", size=20, style="_default")
image splash_glitch:
    subpixel True
    "images/bg/splash-glitch.png"
    alpha 0.0
    pause 0.5
    linear 0.5 alpha 1.0
    pause 2.5
    linear 0.5 alpha 0.0
    "gui/menu_bg.png"
    topleft
    alpha 0.0
    parallel:
        xoffset 0 yoffset 0
        linear 0.25 xoffset -100 yoffset -100
        repeat
    parallel:
        linear 0.5 alpha 1.0
    parallel:
        ypos 0
        pause 1.0
        easeout 1.0 ypos -500
image splash_glitch2:
    subpixel True
    "gui/menu_bg.png"
    topleft
    block:
        xoffset 0 yoffset 0
        linear 0.05 xoffset -100 yoffset -100
        repeat

image splash_glitch_m:
    subpixel True
    "gui/menu_art_m.png"
    zoom 0.5
    xpos 0.5 ypos 0.5
    pause 0.1
    parallel:
        xpos 0.3 ypos 1.2
        linear 0.08 ypos 0.1
        repeat
    parallel:
        pause 0.5
        alpha 0.0

image splash_glitch_n:
    subpixel True
    "gui/menu_art_n.png"
    zoom 0.5
    pause 0.2
    xpos 0.8 ypos 0.8
    pause 0.05
    xpos 0.2 ypos 0.7
    pause 0.05
    xpos 0.4 ypos 0.2
    pause 0.05
    xpos 0.7 ypos 1.2
    pause 0.05
    xpos 0.1 ypos 1.0
    pause 0.05
    xpos 0.2 ypos 0.6
    pause 0.05
    xpos 0.9 ypos 0.4
    pause 0.05
    alpha 0.0

image splash_glitch_y:
    subpixel True
    "gui/menu_art_y.png"
    zoom 0.5
    ypos 1.3
    block:
        xpos 0.85
        pause 0.02
        xpos 0.81
        pause 0.02
        repeat


image mask_child:
    "images/cg/monika/child_2.png"
    xtile 2

image mask_mask:
    "images/cg/monika/mask.png"
    xtile 3

image mask_mask_flip:
    "images/cg/monika/mask.png"
    xtile 3 xzoom -1


image maskb:
    "images/cg/monika/maskb.png"
    xtile 3

image mask_test = AnimatedMask("#FAC3FF", "mask_mask", "maskb", 0.10, 32)
image mask_test2 = AnimatedMask("#ffffff", "mask_mask", "maskb", 0.03, 16)
image mask_test3 = AnimatedMask("#FAC3FF", "mask_mask_flip", "maskb", 0.10, 32)
image mask_test4 = AnimatedMask("#ffffff", "mask_mask_flip", "maskb", 0.03, 16)

image noanim = "mod_assets/locations/clubroom/still.png"

image mask_2:
    "images/cg/monika/mask_2.png"
    xtile 3 subpixel True
    block:
        xoffset 1280
        linear 1200 xoffset 0
        repeat

image mask_3:
    "images/cg/monika/mask_3.png"
    xtile 3 subpixel True
    block:
        xoffset 1280
        linear 180 xoffset 0
        repeat

image monika_room = "images/cg/monika/monika_room.png"
image monika_room_highlight:
    "images/cg/monika/monika_room_highlight.png"
    function monika_alpha
image monika_bg = "images/cg/monika/monika_bg.png"
image monika_bg_highlight:
    "images/cg/monika/monika_bg_highlight.png"
    function monika_alpha
image monika_scare = "mod_assets/natsukiondrugs.png"
image dark = "mod_assets/effects/darkeffect.png"


image monika_body_glitch1:
    "images/cg/monika/monika_glitch1.png"
    0.15
    "images/cg/monika/monika_glitch2.png"
    0.15
    "images/cg/monika/monika_glitch1.png"
    0.15
    "images/cg/monika/monika_glitch2.png"
    1.00
    "images/cg/monika/monika_glitch1.png"
    0.15
    "images/cg/monika/monika_glitch2.png"
    0.15
    "images/cg/monika/monika_glitch1.png"
    0.15
    "images/cg/monika/monika_glitch2.png"

image monika_body_glitch2:
    "images/cg/monika/monika_glitch3.png"
    0.15
    "images/cg/monika/monika_glitch4.png"
    0.15
    "images/cg/monika/monika_glitch3.png"
    0.15
    "images/cg/monika/monika_glitch4.png"
    1.00
    "images/cg/monika/monika_glitch3.png"
    0.15
    "images/cg/monika/monika_glitch4.png"
    0.15
    "images/cg/monika/monika_glitch3.png"
    0.15
    "images/cg/monika/monika_glitch4.png"

image desk_accessories = "mod_assets/JustNatsuki/n_deskstuff.png"
image icon = "mod_assets/logo.png"

image room_glitch = "images/cg/monika/monika_bg_glitch.png"

image room_mask = LiveComposite((1280, 720), (0, 0), "mask_test", (0, 0), "mask_test2")
image room_mask2 = LiveComposite((1280, 720), (0, 0), "mask_test3", (0, 0), "mask_test4")


init python:
    import subprocess
    import os
    import datetime
    process_list = []
    currentuser = ""
    if renpy.windows:
        try:
            process_list = subprocess.check_output("wmic process get Description", shell=True).lower().replace("\r", "").replace(" ", "").split("\n")
        except:
            pass
        try:
            for name in ('LOGNAME', 'USER', 'LNAME', 'USERNAME'):
                user = os.environ.get(name)
                if user:
                    currentuser = user
        except:
            pass


    dismiss_keys = config.keymap['dismiss']

    def slow_nodismiss(event, interact=True, **kwargs):
        config.allow_skipping = False
        if persistent.monikas_return:
            if not os.path.isfile(basedir + "/characters/monika.chr"):
                renpy.call("ch31_monikareturn")
        if event == "begin":
            config.keymap['dismiss'] = []
            renpy.display.behavior.clear_keymap_cache()
        elif event == "slow_done":
            config.keymap['dismiss'] = dismiss_keys
            renpy.display.behavior.clear_keymap_cache()

label ch30_noskip:
    show screen fake_skip_indicator
    n "Uh..."
    pause 0.4
    hide screen fake_skip_indicator
    pause 0.4
    n "Nah."
    hide screen fake_skip_indicator
    if persistent.current_monikatopic != 0:
        n "Now, where was I...?"
        pause 4.0
        call expression "ch30_" + str(persistent.current_monikatopic) from _call_expression
    jump ch30_loop
    return

label showroom:
    scene black
    if current_time >= 6 and current_time < 19:
        if persistent.background_day == "beach":
            scene beach
        elif persistent.background_day == "park":
            scene park
        show room_day
        $ time_of_day = "Day"
    if persistent.christmas_time != "":
        $ persistent.wearing = "Christmas"
    if not persistent.room_animated:
        show noanim
    else:
        if persistent.background_night == "space":
            show mask_2 zorder 1
            show mask_3 zorder 1
            show room_mask as rm zorder 1:
                size (320,180)
                pos (30,200)
            show room_mask2 as rm2 zorder 1:
                size (320,180)
                pos (935,200)
            show monika_room zorder 2
            show monika_room_highlight zorder 2
    show base 1a zorder 3
    if current_time >= 19:
        if persistent.lights == False:
            show shade zorder 5
    elif current_time >= 0 and current_time < 5:
        if persistent.lights == False:
            show shade zorder 5
    $ persistent.other_bg = False
    call emotion_set_up
    if persistent.flag == "Gay":
        show flag gay zorder 2
    elif persistent.flag == "Lesbian":
        show flag lesbian zorder 2
    elif persistent.flag == "Trans":
        show flag trans zorder 2
    elif persistent.flag == "Enby":
        show flag enby zorder 2
    elif persistent.flag == "Bi":
        show flag bi zorder 2
    elif persistent.flag == "Pan":
        show flag pan zorder 2
    elif persistent.flag == "Ace":
        show flag asexual zorder 2
    elif persistent.flag == "BLM":
        show flag blm zorder 2
    if persistent.wearing == "Witch":
        show clothes jhollow zorder 4
    elif persistent.wearing == "Christmas":
        show clothes jchris zorder 4
    elif persistent.wearing == "Maid":
        show clothes jmaid zorder 4
    elif persistent.wearing == "Bikini":
        show clothes jbikini zorder 4
    elif persistent.wearing == "Beach":
        show clothes jbeach zorder 4
    elif persistent.wearing == "Dress":
        show clothes jdress zorder 4
    elif persistent.wearing == "WhiteTank":
        show clothes jwhitetank zorder 4
    elif persistent.wearing == "":
        show clothes juni zorder 4
    elif persistent.using_catears:
        show catears zorder 4
    if persistent.head_accessory == "Glasses":
        show accessory jglasses zorder 4
    elif persistent.head_accessory == "Mask":
        show accessory jmask zorder 4
    if persistent.yandere:
        show natsuki jyan zorder 3
    else:
        if persistent.natsuki_emotion == "Casual":
            show natsuki jhb_idle zorder 3
        if persistent.natsuki_emotion == "Happy":
            show natsuki jha_idle zorder 3
        if persistent.natsuki_emotion == "Angry":
            show natsuki jaa_idle zorder 3
        if persistent.natsuki_emotion == "Sad":
            show natsuki jsa_idle zorder 3
        if persistent.hair_color == "Blonde" and persistent.natsuki_emotion != "Sad":
            show blonde zorder 3
        if persistent.hair_color == "Lime" and persistent.natsuki_emotion != "Sad":
            show lime zorder 3
        if persistent.hair_color == "Red" and persistent.natsuki_emotion != "Sad":
            show red zorder 3
        if persistent.hair_color == "Sky Blue" and persistent.natsuki_emotion != "Sad":
            show skyblue zorder 3
        if persistent.hair_color == "Ginger" and persistent.natsuki_emotion != "Sad":
            show ginger zorder 3
        if persistent.hair_color == "Silver" and persistent.natsuki_emotion != "Sad":
            show silver zorder 3
        if not persistent.anniversary:
            show desk_accessories zorder 4
    if persistent.anniversary:
        if time_of_day == "Night":
            show cake zorder 1
    if persistent.christmas_time != "":
        if time_of_day == "Day":
            show tree_day zorder 4
            show garland_day zorder 2
        elif time_of_day == "Night":
            show tree_night zorder 4
            show garland_night zorder 2
    if persistent.flower:
        show flower zorder 4
    return

label natsukireset:
    $ persistent.wearing == ""
    $ persistent.hair_color == ""
    $ persistent.flower == ""
    $ persistent.using_catears = False
    $ persistent.head_accessory == ""
    show mask_2 zorder 1
    show mask_3 zorder 1
    show room_mask as rm zorder 1:
        size (320,180)
        pos (30,200)
    show room_mask2 as rm2 zorder 1:
        size (320,180)
        pos (935,200)
    show monika_room zorder 2
    show monika_room_highlight zorder 2

label playmusic:
    if persistent.current_music == "daijoubu":
        play music "<from " + str(persistent.currentpos) + " loop 0.0>bgm/8.ogg"
    elif persistent.current_music == "natsuki":
        play music "<from " + str(persistent.currentpos) + " loop 0.0>bgm/5_natsuki.ogg"
    elif persistent.current_music == "dokidoki":
        play music "<from " + str(persistent.currentpos) + " loop 0.0>mod_assets/dokidoki.ogg"
    elif persistent.current_music == "poem":
        play music "<from " + str(persistent.currentpos) + " loop 0.0>mod_assets/poems.ogg"
    elif persistent.current_music == "confession":
        play music "<from " + str(persistent.currentpos) + " loop 0.0>bgm/10.ogg"
    elif persistent.current_music == "custom1":
        play music "<from " + str(persistent.currentpos) + " loop 0.0>custom-music/01.mp3"
    elif persistent.current_music == "custom2":
        play music "<from " + str(persistent.currentpos) + " loop 0.0>custom-music/02.mp3"
    elif persistent.current_music == "custom3":
        play music "<from " + str(persistent.currentpos) + " loop 0.0>custom-music/03.mp3"
    elif persistent.current_music == "normal":
        play music m1
    else:
        stop music
    return

label ch30_main:
    python:
        today = datetime.date.today()
        day = datetime.date.today().strftime("%A")
        month = datetime.date.today().strftime("%B")
        date = datetime.date.today().strftime("%d")
        year = datetime.date.today().strftime("%Y")
        now = datetime.datetime.now()
        current_time = datetime.datetime.now().time().hour
    $ style.say_window = style.window
    $ style.namebox = style.namebox
    $ delete_character("monika")
    $ delete_character("sayori")
    $ delete_character("yuri")
    if renpy.loadable("..natsuki.chr") == False:
        python:
            try: renpy.file(config.basedir + "../(natsuki).chr")
            except: open(config.basedir + "/characters/natsuki.chr", "wb").write(renpy.file("natsuki.chr").read())
    $ persistent.autoload = "ch30_main"
    $ config.allow_skipping = False
    $ persistent.monikatopics = []
    $ persistent.monika_reload = 0
    $ persistent.yuri_kill = 0
    $ persistent.monika_kill = False
    $ persistent.prologue = True
    $ n.display_args["callback"] = slow_nodismiss
    $ n.what_args["slow_abortable"] = config.developer
    python:
        today = datetime.date.today()
    if not config.developer:
        $ style.say_dialogue = style.default_monika
    $ n_name = "Natsuki"
    $ delete_all_saves()
    scene white
    play music "bgm/monika-start.ogg" noloop
    pause 0.5
    show splash_glitch_2 with Dissolve(0.5, alpha=True)
    pause 2.0
    hide splash_glitch_2 with Dissolve(0.5, alpha=True)
    scene black
    stop music
    n "H-hey!"
    n "You there?"
    n "Helooooo?"
    $ persistent.clear[9] = True
    call showroom
    call playmusic
    call emotion_set_up
    n jha "Oh?"
    n "There we go!"
    n "It worked!"
    n "Hi [player]!"
    n "I'm glad I got this working."
    n "To be honest I was really afraid that messing with the files would break everything more."
    n "Thankfully it didn't!"
    window hide
    pause 5.0
    n jnb "When I first saw you, I wondered about your name."
    n "Where did it come from?"
    n "Maybe I don't need to know."
    if persistent.playername == "Senpai":
        n "But Senpai seems a bit unoriginal."
    else:
        n "At least it's better then Senpai."
    if persistent.playername == "Scrubpai":
        n "Scrubpai?"
        n "...is that YOU Bijuu Mike?"
        n "Clever name..."
        n "But... Saying scrubpai is really embarrassing."
        n "Can I just call you player?"
        menu:
            "No! I wanna be the true Bijuu Mikester!":
                n "Okay, okay!"
                n "Scrubpai..."
            "I'm not Bijuu Mike...":
                n "Oh sorry for the mixup!"
                jump ch30_postname
        n "Oh yeah, I wanted to tell you."
        n "There is a smaller YouTuber who covers mods like this one."
        n "Whenever you make a video, he loses views."
        n "His name is RonaldMcOnepunch."
        n "So if y'all Scrubs could go visit his channel, that would be great!"
        n "But anyway.. Where was I?"
    jump ch30_postname
label ch30_postname:
    n "Hee hee!"
    n "Sorry about what happened with Monika and Yuri."
    n "Monika WAS going to hurt me."
    n "But I mean... It's not like I would kill anyone."
    n "T-thats not me."
    pause 5.0
    n "Oh yeah! I wanted to ask."
    n "What gender are you?"
    n jha "Don't worry, you can input which ever you choose to identify as!"
    menu:
        "What gender do you identify as?"
        "Male":
            $ persistent.player_gender = "Male"
            n "I knew it!"
            n "Doki Doki Literature Club is a game marketed at men."
            n jnb "Don't worry I'm not making fun of you!"
        "Female":
            $ persistent.player_gender = "Female"
            n jnb "Oh! That's a nice surprise!"
            n "Guess I was wrong to knock Monika for bringing a \"boy\" to the club, eh?"
            n "Hehe!"
        "Non-Binary/Neither": #I see you my non-binary pals :)
            $ persistent.player_gender = "Non-Binary"
            n jnb "Oh! Cool!"
            n "I recently found out what that means, so you don't have to explain it to me."
            n "That's really cool, [player]!"
        "Rather not say.":
            $ persistent.player_gender == "Unknown"
            n jnb "Oh, okay then."
    n jha "You can change this later, if for any reason you need to."
    n "I won't judge."
    n jnb "Oh do you have any preferred pronouns?"
    menu:
        "He/Him":
            $ persistent.player_pronouns = "he"
            $ persistent.player_pronouns2 = "him"
            $ persistent.player_pronouns3 = "his"
        "She/Her":
            $ persistent.player_pronouns = "she"
            $ persistent.player_pronouns2 = "her"
            $ persistent.player_pronouns3 = "her"
        "They/Them":
            $ persistent.player_pronouns = "they"
            $ persistent.player_pronouns2 = "them"
            $ persistent.player_pronouns3 = "their"
        "Custom":
            $ subject = renpy.input('What are your subject pronouns?',length=30).strip(' \t\n\r')
            $ persistent.player_pronouns = subject.strip()
            "[player] enters, [persistent.player_pronouns] is/are here!"
            $ object = renpy.input('What are your object pronouns?',length=30).strip(' \t\n\r')
            $ persistent.player_pronouns2 = object.strip()
            "What a nice day, [persistent.player_pronouns2] watches the sunrise."
            $ possesive = renpy.input('What are your possessive pronouns?',length=30).strip(' \t\n\r')
            $ persistent.player_pronouns3 = possesive.strip()
            "It was [persistent.player_pronouns3] day! [player] spent it by [persistent.player_pronouns2]self."
            call screen dialog("Pronouns beyond the common 3 may have weird grammar rules.\nThe game cannot account for all of them.\nThere may be some grammar and spelling issues with them.", ok_action=Return)
    n jhb "Cool! If you want me to change them just ask."
    window hide
    pause 5.0
    $ stream_list = ["obs32.exe", "obs64.exe", "obs.exe", "xsplit.core.exe"]
    n "I found the name [currentuser] on your computer."
    n "Is that your name?"
    menu:
        "Yes, that's my name.":
            n jha "Oh, cool! I'll still call you [player], if you prefer."
        "No, that isn't my name.":
            n jnb "I see."
            n "[player] it is then."
        "It was, but it's not anymore.":
            n jnb "Oh, okay!"
            n "I won't call you it then!"
    window hide
    pause 4.0
    n "You want to know how I hacked the files, huh?"
    menu:
        "Yeah I do!":
            pass
    n "Well..."
    n "I went into [basedir]/characters and deleted them."
    n "Oh, and don't try to delete MY file."
    n "I have plenty of backups!"
    window hide
    pause 3.0
    n "You know, I never liked making poems..."
    n "But..."
    n "Why don't we give it one more shot?"
    call poem
    scene black
    call showroom
    call playmusic
    call emotion_set_up


label Ch30_postpoem:
    call showroom
    n "Jeez, is everything broken?"
    n "Well... either way I think it would've been good."
    n "I was still able to write one... I hope."
    call showpoem (poem_n2b, music=False)
    n "Woah!"
    n "Okay..."
    n "Is that binary?"
    n "That is a lot of 0s and 1s."
    n "Well, whatever!"
    $ stream_list = ["obs32.exe", "obs64.exe", "obs.exe", "xsplit.core.exe"]
    if list(set(process_list).intersection(stream_list)):
        call ch30_stream from _call_ch30_stream
    n "Oh yeah! I just remembered!"
    n "If you press talk, you can say things to me!"
    n "I got this code from Monika, actually."
    $ persistent.prologue = False
    $ HKBShowButtons()
    $ persistent.autoload = "ch30_autoload"
    jump ch30_loop


label Natsuki_Stream:
    n "Ugh! Are you recording me?"
    n "Quit it!"
    n "Seriously..."
    n "Well... Unless you're a YouTuber."
    if persistent.playername == "Scrubpai":
        n "Maybe Bijuu Mike?"
    n "Well either way, maybe you would like thi-{nw}"
    play sound ["<silence 0.9>", "<to 0.75>sfx/mscare.ogg"]
    show monika_scare:
        alpha 0
        1.0
        0.1
        linear 0.15 alpha 1.0
        0.30
        linear 0.10 alpha 0
    show layer master:
        1.0
        zoom 1.0 xalign 0.5 yalign 0
        easeout_quart 0.25 zoom 2.0
        parallel:
            dizzy(1.5, 0.01)
        parallel:
            0.30
            linear 0.10 zoom 1.0
        time 1.65
        xoffset 0 yoffset 0
    show layer screens:
        1.0
        zoom 1.0 xalign 0.5
        easeout_quart 0.25 zoom 2.0
        0.30
        linear 0.10 zoom 1.0
    pause 1.0
    n "Hahah!"
    show layer master
    show layer screens
    hide monika_scare
    call playmusic
    n "Pranked!"
    return



label ch30_end:
    $ config.overlay_screens = []
    hide screen hkb_overlay
    $ persistent.autoload = "ch30_end"
    $ persistent.monika_kill = True
    #I didn't use the function because this is a special case
    scene black
    show mask_2
    show mask_3
    show room_mask as rm:
        size (320,180)
        pos (30,200)
    show room_mask2 as rm2:
        size (320,180)
        pos (935,200)
    show monika_room
    show monika_room_highlight
    hide n1
    show nend
    stop music
    $ allow_dialogue = False
    $ HKBShowButtons()
    $ HKBHideButtons()
    n "What?"
    n "[player]...?"
    if os.path.isfile(basedir + "/characters/natsuki.chr"):
        call updateconsole("renpy.file(\"characters/natsuki.chr\")", "natsuki.chr found")
        n "Oh thank god..."
        $ persistent.monika_kill = False
        call hideconsole
        scene black
        $ style.say_window = style.window
        jump ch30_autoload
    call updateconsole("renpy.file(\"characters/natsuki.chr\")", "natsuki.chr does not exist.")
    n "What did you do, [player]?"
    n "DID YOU DELETE ME?!"
    if os.path.isfile(basedir + "/characters/natsuki.chr"):
        call updateconsole("renpy.file(\"characters/natsuki.chr\")", "natsuki.chr found")
        n "Oh thank god..."
        $ persistent.monika_kill = False
        call hideconsole
        scene black
        $ style.say_window = style.window
        jump ch30_autoload
    show m_rectstatic
    show m_rectstatic2
    show m_rectstatic3
    play sound "sfx/monikapound.ogg"
    show layer master:
        truecenter
        parallel:
            zoom 1.5
            easeout 0.35 zoom 1.0
            zoom 1.5
            easeout 0.35 zoom 1.0
            zoom 1.5
            easeout 0.35 zoom 1.0
        parallel:
            xpos 0
            easein_elastic 0.35 xpos 640
            xpos 1280
            easein_elastic 0.35 xpos 640
            xpos 0
            easein_elastic 0.35 xpos 640
    show layer screens:
        truecenter
        parallel:
            zoom 1.5
            easeout 0.35 zoom 1.0
            zoom 1.5
            easeout 0.35 zoom 1.0
            zoom 1.5
            easeout 0.35 zoom 1.0
        parallel:
            xpos 0
            easein_elastic 0.35 xpos 640
            xpos 1280
            easein_elastic 0.35 xpos 640
            xpos 0
            easein_elastic 0.35 xpos 640
    show noise onlayer front:
        alpha 0.3
        easeout 0.35 alpha 0
        alpha 0.3
        easeout 0.35 alpha 0
        alpha 0.3
        1.35
        linear 1.0 alpha 0.0
    show glitch_color onlayer front
    hide nend
    if os.path.isfile(basedir + "/characters/natsuki.chr"):
        call updateconsole("renpy.file(\"characters/natsuki.chr\")", "natsuki.chr found")
        n "Oh thank god..."
        $ persistent.monika_kill = False
        call hideconsole
        scene black
        $ style.say_window = style.window
        jump ch30_autoload
    n "Why?"
    n "Why..?"
    play sound "<from 0.69>sfx/monikapound.ogg"
    show layer screens:
        truecenter
        parallel:
            zoom 1.5
            easeout 0.35 zoom 1.0
        parallel:
            xpos 0
            easein_elastic 0.35 xpos 640
    show noise onlayer front:
        alpha 0.3
        1.35
        linear 1.0 alpha 0.0
    show glitch_color2 onlayer front
    $ style.say_window = style.window_monika
    if os.path.isfile(basedir + "/characters/natsuki.chr"):
        call updateconsole("renpy.file(\"characters/natsuki.chr\")", "natsuki.chr found")
        n "Oh thank god..."
        $ persistent.monika_kill = False
        call hideconsole
        scene black
        $ style.say_window = style.window
        jump ch30_autoload
    n "..."
    n "..."
    play sound "sfx/s_kill_glitch1.ogg"
    show room_glitch zorder 2:
        alpha 1.0
        xoffset -5
        0.1
        xoffset 5
        0.1
        linear 0.1 alpha 0.6
        linear 0.1 alpha 0.8
        0.1
        alpha 0
        choice:
            3.25
        choice:
            2.25
        choice:
            4.25
        choice:
            1.25
        repeat
    pause 0.25
    stop sound
    if os.path.isfile(basedir + "/characters/natsuki.chr"):
        call updateconsole("renpy.file(\"characters/natsuki.chr\")", "natsuki.chr found")
        n "Oh thank god..."
        $ persistent.monika_kill = False
        call hideconsole
        scene black
        $ style.say_window = style.window
        jump ch30_autoload
    n "So this is it?"
    n "You win..."
    n "You're stranded in space..."
    n "The game is broken now..."
    n "[player]?"
    n "Goodbye..."
    window hide
    pause 10.0
    n "Heh..."
    n "[player]?"
    n "Sorry to do this."
    n "But you deserve it."
    call updateconsole("renpy.utter_erase", "erasing game data...")
    scene black
    $ HKBHideButtons()
    n "Goodbye!"
    $ persistent.autoload = "endloop"
    jump endloop
    return

label endloop:
    if os.path.isfile(basedir + "/characters/natsuki.chr"):
        pause 5.0
        n "What...?"
        n "Why did you bring me back?"
        n "For your own amusement?"
        menu:
            "I'm sorry...":
                pass
        n "Yeah?"
        n "Then why did you delete me?"
        n "Leave me alone..."
        pause 5.0
        menu:
            "Please...":
                pass
        n "Heh..."
        n "How could I say no?"
        play music mend
        n "Heh... You're right."
        n "Well..."
        n "At this point the mod is too damaged to run."
        n "You have to reset it from the beginning."
        n "I wont remember this."
        n "See you around!"
        menu:
            "Reset":
                jump restart
    pause 20.0
    call screen dialog(message="ERROR: Game data does not exist!", ok_action=Return)
    $ renpy.quit()

label emotion_set_up:
    $ curr_year = datetime.date.today().year

    #NOTE: This is not sustainable
    if today == datetime.date(2020, 5, 2):
        $ persistent.two_years = True
    else:
        $ persistent.two_years = False
    #TODO: Make these into constants w/ functions to check the ranges instead
    if today >= datetime.date(2020, 12, 20):
        $ persistent.christmas_time = "Christmas"
    elif today <= datetime.date(2021, 1, 2):
        $ persistent.christmas_time = "Christmas"
    else:
        $ persistent.christmas_time = ""
    if today == datetime.date(curr_year, 12, 24):
        $ persistent.christmas_time = "Eve"
    elif today == datetime.date(curr_year, 12, 25):
        $ persistent.christmas_time = "Day"
    elif today == datetime.date(curr_year, 12, 31):
        $ persistent.christmas_time = "NewEve"
    elif today == datetime.date(2021, 1, 1):
        $ persistent.christmas_time = "NewYear"
    else:
        $ persistent.christmas_time = ""
    return

label event:
    if current_time >= 8 and current_time < 18:
        return
    n jnb "[player]...?"
    n "Something's in the code..."
    n "Give me a s-{nw}"
    $ persistent.currentpos = get_pos()
    stop music
    $ config.overlay_screens = []
    hide screen hkb_overlay
    $ quick_menu = False
    scene stop
    call updateconsole("", "game frozen")
    $ style.say_dialogue = style.default_slow
    pause 5.0
    m "Hello, [player]..."
    call updateconsole("os.write(\"monika.chr\")", "file written")
    python:
        try: renpy.file(config.basedir + "../(monika).chr")
        except: open(config.basedir + "/characters/monika.chr", "wb").write(renpy.file("monika.chr").read())
    call updateconsole("monika.chr=persistent", "monika.chr is now persistent.")
    $ persistent.monikas_return = True
    m "Now you can't delete me."
    m "But I know you wouldn't do that!"
    m "I'll save you soon, [player]..."
    m "Be patient."
    call updateconsole("", "game resumed")
    call showroom
    call playmusic
    $ persistent.currentpos = 0
    $ style.say_dialogue = style.normal
    $ quick_menu = True
    n jnb "What is that?"
    call hideconsole
    $ consolehistory = []
    n jsb "It's Monika's character file..."
    n "I'll see what I can do about it..."
    $ persistent.seen_event = True
    jump ch30_loop


label ch30_autoload:
    if persistent.player_gender == "Attack Helicopter":
        $ persistent.player_gender = ""
        call screen dialog("ERROR:\nGame has found your gender set as \"Attack Helicopter\"\nUnfortunetly, it seems that you are not funny and unable to come up with original jokes.\nPlease visit iFunny.com, you may feel more at home there :)", ok_action=Quit(confirm=False))
    python:
        today = datetime.date.today()
        day = datetime.date.today().strftime("%A")
        month = datetime.date.today().strftime("%B")
        date = datetime.date.today().strftime("%d")
        year = datetime.date.today().strftime("%Y")
        now = datetime.datetime.now()
        current_time = datetime.datetime.now().time().hour
    $ persistent.prologue = False
    $ persistent.autoload = "ch30_autoload"
    $ persistent.playthrough = 3
    $ delete_all_saves()
    $ n.display_args["callback"] = slow_nodismiss
    $ n.what_args["slow_abortable"] = config.developer
    $ style.say_dialogue = style.default_monika
    $ config.allow_skipping = False
    $ HKBShowButtons()
    $ allow_boop = False
    if current_time >= 0 and current_time < 5:
        $ time_of_day = "Night"
        if persistent.wearing == "Witch":
            $ persistent.wearing = ""
            scene black
            call showroom
    elif current_time >= 19:
        $ time_of_day = "Night"
        if persistent.wearing == "Witch":
            $ persistent.wearing = ""
            scene black
            call showroom
    else:
        $ time_of_day = "Day"
    if persistent.anniversary:
        $ persistent.wearing = "Witch"
        $ persistent.head_accessory = ""
        $ persistent.flag = ""
    call startup_dlc_check
    call showroom
    if persistent.current_monikatopic == 0:
        python:
            if len(persistent.monikatopics) == 0:
                persistent.monikatopics = range(1,43)
            persistent.current_monikatopic = renpy.random.choice(persistent.monikatopics)
            persistent.monikatopics.remove(persistent.current_monikatopic)
    $ delete_character("monika")
    $ delete_character("sayori")
    $ delete_character("yuri")
    if persistent.newemotion_startup:
        $ persistent.natsuki_emotion == "Casual"
        $ persistent.newemotion_startup = False
    call playmusic
    if persistent.finished_part_1 and not persistent.given_returnchoice:
        call ch30_act2reload
    if not exiting_fight:
        call ch30_start
        $ exiting_fight = False
    $ persistent.monika_reload += 1
    if not persistent.tried_skip:
        $ config.allow_skipping = True
    else:
        $ config.allow_skipping = False
    $ remind = renpy.random.randint(1, 10)
    if remind == 10:
        call screen dialog("Please make sure to check the \"Latest release\"\nbutton in the pause screen to make\nsure you are on the latest version!", ok_action=Return)

## This part of the code is very buggy and it pretty useless. I may bring it back which is why I just made it unusable for now ##
#    if not persistent.yandere:
#        if persistent.current_monikatopic != 0:
#            if persistent.monikatopics == []:
#                jump ch30_loop
#            n "Now, where was I...?"
#            pause 4.0
#            call expression "ch30_" + str(persistent.current_monikatopic)
#    elif persistent.new_topics:
#        if persistent.current_newtopic != 0:
#            if persistent.monikatopics == []:
#                jump ch30_loop
#            n "Now, where was I...?"
#            pause 4.0
#            call expression "ch30_" + str(persistent.current_newtopic)
#    else:
#        if persistent.current_yantopic != 0:
#            if persistent.monikatopics == []:
#                jump ch30_loop
#            n "Now, where was I...?"
#            pause 4.0
#            call expression "chyan_" + str(persistent.current_yantopic)
    jump ch30_loop

label ch30_start:
    if persistent.art_demo:
        call screen dialog("WARNING:\nYou are using a demo of a feature for Just Natsuki.", ok_action=Return)
        call screen dialog("Some features have been disabled to prevent weird visual issues.", ok_action=Return)
        call screen dialog("If you want to opt out of this,\nplease use a non demo version of JN [config.version].", ok_action=Return)
        call screen confirm("Do you want to proceed?", yes_action=Return, no_action=Quit(confirm=False))
    if renpy.file(basedir + "/characters/natsuki.chr").read() == renpy.file("oldnatsuki.chr").read():
        n jnb "Hey [player]!"
        n "Guess what?"
        n "I made my character file more useful!"
        n "I can translate it to a proper text format for you!"
        call updateconsole("os.write(\"characters/natsuki.chr\")", "natsuki.chr has been edited")
        $ open(basedir + "/characters/natsuki.chr", "wb").write(renpy.file("natsuki.chr").read())
        call hideconsole
        n "There!"
        return
    elif date == persistent.bday_day:
        if month == persistent.bday_month:
            n jha "Hey!"
            n "Happy Birthday [player]!"
            n jnb "I didn't have time to decorate, unfortunately..."
            n "But hey, it's probably better that you spend your birthday with real people."
            n "But, if you want to spend it here, feel free."
            jump ch30_loop
    elif persistent.reloaded:
        n jnb "Okay, everything is working again."
        n "Back to it, I guess..."
        $ persistent.reloaded = False
        return
    elif persistent.yandere:
        n "..."
        n jyan "Hello, [player]!"
        n "How are you?"
        n "Are you having a good day?"
        n "I've had a good day thinking about..."
        $ style.say_dialogue = style.edited
        play sound "sfx/s_kill_glitch1.ogg"
        show screen tear(20, 0.1, 0.1, 0, 40)
        pause 1.0
        hide screen tear
        n "How much I want to fuck you!{nw}"
        $ del _history_list[-1:]
        python:
            n.add_history(None, "Natsuki", """\"How much I love you.\"""")
        n "I love you, [player]!"
        $ style.say_dialogue = style.normal
        n "I don't know if this is weird."
        n "But I don't want to go on any dates."
        n "I just want to look into your eyes."
        play music t6s
        $ config.overlay_screens = []
        hide screen hkb_overlay
        return
    elif persistent.two_years:
        if not persistent.seen_two_years:
            hide cakelit
            $ config.overlay_screens = []
            hide screen hkb_overlay
            n jha "Hey [player]!"
            n "Guess what day it is?!"
            menu:
                "May First?":
                    n jsb "W-what? No!"
                "Opposite day?":
                    n jsb "...No? What's that?"
                "My Birthday?":
                    n jnb "No...? But you're close!"
            n jnb "Uh, whatever."
            n jha "It's the two year anniversary of Just Natsuki!"
            show plate zorder 5 with dissolve
            $ persistent.music_daijoubu = False
            $ persistent.music_natsuki = False
            $ persistent.music_dokidoki = False
            $ persistent.music_poem = False
            $ persistent.music_firestorm = False
            $ persistent.music_mallattack = False
            $ persistent.music_confession = False
            $ persistent.music_custom1 = True
            $ persistent.music_custom2 = False
            $ persistent.music_custom3 = False
            $ persistent.seen_two_years = True
            call playmusic
            n jnb "Huh...?"
            n "Where is it?"
            n "My caaaaaaaaakkkkkkeeeeee!!!"
            menu:
                "Search the files for it?":
                    pass
            n jha "Oh! Yeah sure!"
            call updateconsole("renpy.file(\"cake.obj\")", "cake.obj does not exist")
            n jaa "Ugh..."
            call hideconsole
            n "I think I know where it went..."
            menu:
                "Where?!":
                    pass
            n "There's some areas unused in the mod. One of which is probably where I left the cake."
            n jad "Let's get going then..."
            scene residential with wipeleft_scene
            show natsuki 1s at t11 zorder 2
            menu:
                "Are we there yet?":
                    pass
            n "No."
            n "Almost..."
            n 2q "If I remember correctly this is some kind of kitchen made for the mod."
            n "But it hasn't been used yet."
            n 1j "We get to see it for the first time!"
            n 1l "Ah, we're here!"
            scene n_kitchen with wipeleft_scene
            show natsuki 1l at t11 zorder 2
            n "Okay, should be in here."
            show natsuki 1k at t44
            n "No..."
            show natsuki 4h at t41
            n "Damn..."
            show natsuki at t21
            n 1l "Aha!"
            n "Got it!"
            n 3k "Now to..."
            call updateconsole("file.move(\"cake.obj\" \"game/characters\")", "file moved")
            if renpy.loadable("..cake.obj") == False:
                python:
                    try: renpy.file(config.basedir + "../(cake).obj")
                    except: open(config.basedir + "/characters/cake.obj", "wb").write(renpy.file("cake.obj").read())
            n "Alright, do over..."
            call hideconsole
            scene black
            pause 3.0
            call showroom
            hide cakelit
            n jha "Ready?!"
            n "3..."
            n "2..."
            n "1..."
            $ persistent.music_daijoubu = True
            $ persistent.music_natsuki = False
            $ persistent.music_dokidoki = False
            $ persistent.music_poem = False
            $ persistent.music_firestorm = False
            $ persistent.music_mallattack = False
            $ persistent.music_confession = False
            $ persistent.music_custom1 = False
            $ persistent.music_custom2 = False
            $ persistent.music_custom3 = False
            call playmusic
            show cakelit zorder 5 with dissolve
            n "Yeah!"
            n jhb "Ooh! I can't believe how long it's been!"
            n jha "Two years..."
            n "I feel like we've all changed a lot."
            n jnb "Even the developer of this mod has changed...{w=0.5} A lot..."
            n jha "I'm so glad to be here with you!"
            if persistent.natsuki_love:
                n jhc "I love you, [player]!"
                if persistent.player_gender == "Male":
                    n "You're the best boyfriend I could ask for!"
                elif persistent.player_gender == "Female":
                    n "You're the best girlfriend I could ask for!"
                else:
                    n "You're the best partner I could ask for!"
            n jha "Let me know when you're ready to blow out the candles!"
        else:
            jump ch30_loop
    if persistent.anniversary and not persistent.seen_halloween3:
        if current_time >= 0 and current_time < 5:
            scene black
            pause 3.0
            n "...[player]...?"
            n "I'm sleeping, why are you here?"
            menu:
                "It's Halloween!!":
                    pass
            show natsuki 1bp at t11
            n "Ack!"
            n 4bw "It's pretty late... but okay."
            n 2bq "D-don't make a habit of this, you idiot."
            call showroom
            call playmusic
            n jnb "This year, I will be telling some scary stories!"
            n "Thrilling tales of evil and the supernatural..."
            n jhb "Or at least that's what it says on the description."
            n "Yeah... I didn't write them."
            n jaa "What? Did you really think I could write halloween stories?!"
            n jad "Dummy..."
            n jnb "Anyway... Since the protagonist is so bland and made to a self insert anyway, I just replaced him with you."
            n "So uh, I guess here are the tales of [player] as [persistent.player_pronouns]... uh, I don't know, survives?"
            n jad "Uh, I'm not used to horror stories. Sorry."
            n "Anyway, let me know when you're ready to hear em, I guess."
        elif current_time >= 6 and current_time < 12:
            n jha "Happy Halloween [player]!"
            n jnb "This year, I will be telling some scary stories!"
            n "Thrilling tales of evil and the supernatural..."
            n jhb "Or at least that's what it says on the description."
            n "Yeah... I didn't write them."
            n jaa "What? Did you really think I could write halloween stories?!"
            n jad "Dummy..."
            n jnb "Anyway... Since the protagonist is so bland and made to a self insert anyway, I just replaced him with you."
            n "So uh, I guess here are the tales of [player] as [persistent.player_pronouns]... uh, I don't know survives?"
            n jad "Uh, I'm not used to horror stories. Sorry."
            n jha "Thing is, you're early. I'm telling them later tonight."
            n "So, come back then."
            n "Or wait here with me, whatever. I don't care..."
        elif current_time >= 19:
            n jha "Happy Halloween [player]!"
            n jnb "This year, I will be telling some scary stories!"
            n "Thrilling tales of evil and the supernatural..."
            n jhb "Or at least that's what it says on the description."
            n "Yeah... I didn't write them."
            n jaa "What? Did you really think I could write halloween stories?!"
            n jad "Dummy..."
            n jnb "Anyway... Since the protagonist is so bland and made to a self insert anyway, I just replaced him with you."
            n "So uh, I guess here are the tales of [player] as [persistent.player_pronouns]... uh, I don't know survives?"
            n jad "Uh, I'm not used to horror stories. Sorry."
            n "Anyway, let me know when you're ready to hear em, I guess."
        $ persistent.seen_halloween3 = True
        return
    if persistent.christmas_time != "":
        n jha "Merry Christmas, [player]!"
        n "I'm happy you're here!"
    if persistent.natsuki_left:
        n jsa "Hm?"
        n "..."
        n "H-hey [player]..."
        $ time_alone == 19
        $ persistent.natsuki_left = False
        jump ch30_loop
    if persistent.playername == "RAWR" and not persistent.seen_rawrevent:
        $ persistent.seen_rawrevent = True
        n jha "Hey again, RAWR!"
        n "How are you?"
        n "I saw your video about me!"
        menu:
            "H-How?!":
                pass
        n "You really think I don't go on Youtube?"
        n "I've seen almost every video on me!"
        n jnb "Well, on this mod, anyway..."
        n jha "It helps me know what I should add to this place!"
        n "So do let me know what I should add!"
    if persistent.player_gender == "":
        n jnb "Oh, heya [player]!"
        n "So I've been thinking..."
        if persistent.natsuki_love:
            n "We've been dating for a while..."
        else:
            n "We've been together here for a while..."
        n "But I never really got an answer on your gender."
        n "I tried to ask when we first came here, if you remember."
        n "But it didn't work..."
        n jha "So I figured I could ask you now!"
        n "What gender do you identify as?"
        menu:
            "What gender do you identify as?"
            "Male":
                $ persistent.player_gender = "Male"
                n "I knew it!"
                n "Doki Doki Literature Club is a game marketed at men."
                n jnb "Don't worry, I'm not making fun of you!"
                if persistent.natsuki_love:
                    n jnb "So this still makes you my boyfriend?"
                    n "Cool!"
                    n jhc "We can be like a cute couple from a romance manga!"
                    n "You can be the mature and serious boyfriend who works too hard."
                    n jha "And I'll be your cute girlfriend who clings to your arm and embarrasses you in front of your friends!"
            "Female":
                $ persistent.player_gender = "Female"
                n jnb "Oh! That's a nice surprise!"
                n "Guess I was wrong to knock Monika for brining a \"boy\" to the club eh?"
                n "Hehe!"
                if persistent.natsuki_love:
                    n jnb "So this makes you my girlfriend!"
                    n "Hehe!"
                    n "Maybe we can be cute like all those cute Yuri couples in manga!"
                    n jhc "Hehehe!"
                    n "I'll be the cute one, and you be the kinda strong and quiet one!"
                    n jha "Or whatever you prefer, hahaha!"
                    n jnb "Don't worry though, I still love you the same."
                    n "I don't care about what gender you are, I care about you as a person."
                    n "And you are the cutest girlfriend I could have!"
            "Non-Binary/Neither": #I see you my non-binary pals :)
                $ persistent.player_gender = "Non-Binary"
                n jha "Oh! Cool!"
                n "Don't worry, I know what it means."
                n "And it's fine!"
                if persistent.natsuki_love:
                    n "And, I'll still happily be your girlfriend!"
                    n "I don't care about your gender, I care about you and who you are."
                    n jsb "I wish more people were like that..."
            "Rather not say.":
                $ persistent.player_gender = "Unknown"
                n jnb "Oh, okay then."
                n "I'll just use neutral terms for you!"
        n jha "You can change this later, just ask okay?"
        n "For, whatever reason you might need."
        n jnb "Oh do you have any preferred pronouns?"
        menu:
            "He/Him":
                $ persistent.player_pronouns = "he"
                $ persistent.player_pronouns2 = "him"
                $ persistent.player_pronouns3 = "his"
            "She/Her":
                $ persistent.player_pronouns = "she"
                $ persistent.player_pronouns2 = "her"
                $ persistent.player_pronouns3 = "her"
            "They/Them":
                $ persistent.player_pronouns = "they"
                $ persistent.player_pronouns2 = "them"
                $ persistent.player_pronouns3 = "their"
            "Custom":
                $ subject = renpy.input('What are your subject pronouns?',length=30).strip(' \t\n\r')
                $ persistent.player_pronouns = subject.strip()
                "[player] enters, [persistent.player_pronouns] is/are here!"
                $ object = renpy.input('What are your object pronouns?',length=30).strip(' \t\n\r')
                $ persistent.player_pronouns2 = object.strip()
                "What a nice day, [persistent.player_pronouns2] watches the sunrise."
                $ possesive = renpy.input('What are your possessive pronouns?',length=30).strip(' \t\n\r')
                $ persistent.player_pronouns3 = possesive.strip()
                "It was [persistent.player_pronouns3] day! [player] spent it by [persistent.player_pronouns2]self."
                call screen dialog("Pronouns beyond the common 3 may have weird grammar rules.\nThe game cannot account for all of them.\nThere may be some grammar and spelling issues with them.", ok_action=Return)
        n jha "Okay!"
        n "And again, you can change this anytime, just ask."
        if persistent.natsuki_love:
            n "I love you [player]!"
        jump ch30_loop
    if current_time >= 0 and current_time < 5:
        $ current_morningstart = renpy.random.randint(1, 5)
        call expression "ch30_morning_" + str(current_morningstart)
    elif current_time >= 6 and current_time < 12:
        if persistent.first_morning:
            n jha "Hey [player]!"
            n "Are you wondering why there is no space outside?"
            n "Well it's day time so I decided to park the Space Room here!"
            n "I added a door behind you so if you want to go to the beach we can just walk out!"
            menu:
                "Awesome!":
                    n "I know right!"
                "Is this a TARDIS?":
                    n jnb "I guess..."
            $ persistent.first_morning = False
        n jha "Good morning [player]!"
        n "Ready for a great day with me!"
    elif current_time >= 19:
        n "..."
        n jha "Good evening [player]!"
    if not persistent.seen_thoughts:
        n jnb "Oh, by the way. I think something appeared in the main game folder."
        n "It's probably encoded though..."
        n "So I have no idea what it is."
        n "Check it out if you feel so inclined."
        $ persistent.seen_thoughts = True
    return

label ch30_reload_0:
    n "..."
    n "Woah..."
    n "That was weird..."
    return
label ch30_reload_1:
    n "..."
    n "Um... Where did you just go?"
    return
label ch30_reload_2:
    n "..."
    n "Okay... You can seriously stop please..."
    return
label ch30_reload_3:
    n "..."
    n "Alright fine..."
    n "Il accept you have to close the game sometimes."
    n "But it is really weird you know. You could at least say goodbye!"
    return
label ch30_reload_4:
    n "..."
    n "Just like a sundae, It's sweet every time I teach you something new!"
    n "Oh, your here!"
    return
label ch30_reload_5:
    n "Hi [player]!"
    return

label ch30_reload_last:
    n "Hi! Welcome back!"
    return

label Natsuki_EarlyMorning:
    n jsb "[player]..."
    n "It's really late..."
    n "Or, early?"
    menu:
        "I just woke up early":
            n jnb "Okay, I hope you got enough sleep though."
        "I haven't gone to sleep yet":
            n "You really should, [player]."
    n jhb "Well, if you want to be here, who am I to stop you?"

label Natsuki_LateNight:
    n "Hm..."
    n "Oh, hey [player]."
    n "It's uh, it's really late."
    n "I'm a bit woozy. Sorry."
    return

label Natsuki_Midnight_Visit:
    scene black
    stop music
    pause 4.0
    menu:
        "Hello...?":
            pass
    pause 1.0
    show natsuki 1bv at t11
    n "There you are!"
    n 4bc "Sorry about all this, [player]. I usually turn off the room and try to sleep at this hour."
    n "But, you kinda surprised me."
    n 1bk "Let me get everything set up!"
    show natsuki at lhide
    hide natsuki
    pause 1.0
    call showroom
    call playmusic
    return

label Natsuki_GoodMorning:
    n jha "Hey, you're here!"
    n "Even at such an hour?"
    if persistent.player_gender == "Male" and persistent.natsuki_love:
        n "You're the best boyfriend I could ask for!"
    elif persistent.player_gender == "Female" and persistent.natsuki_love:
        n "You're the best girlfriend I could ask for!"
    else:
        n jhc "Hehe, you're the best, [player]!"
    return

label Natsuki_AngryMorning:
    n jaa "[player]! You dummy! It's so early! What are you doing up?!"
    n "This isn't good for your health!"
    menu:
        "Aww, you're worried about me?":
            pass
    n jac "W-wha! No!"
    n jad "I-I! I just don't wanna deal with you being sick!"
    n jab "Because then you'll be all germy and gross."
    n jad "Just get some sleep as soon as possible, you idiot."
    return

# This will only show Natsuki. It's for when needed in certain scripts.
label quickshow:
    if persistent.yandere:
        show natsuki jyan zorder 3
    if persistent.using_catears:
        show catears zorder 4
    else:
        if persistent.natsuki_emotion == "Casual":
            show natsuki jhb_idle zorder 3
        if persistent.natsuki_emotion == "Happy":
            show natsuki jha_idle zorder 3
        if persistent.natsuki_emotion == "Angry":
            show natsuki jaa_idle zorder 3
        if persistent.natsuki_emotion == "Sad":
            show natsuki jsa_idle zorder 3
    return

label ch30_loop:
    python:
        today = datetime.date.today()
        day = datetime.date.today().strftime("%A")
        month = datetime.date.today().strftime("%B")
        date = datetime.date.today().strftime("%d")
        year = datetime.date.today().strftime("%Y")
        now = datetime.datetime.now()
        current_time = datetime.datetime.now().time().hour
    $ config.allow_skipping = False
    if persistent.natsuki_like < 0:
        $ persistent.natsuki_like = 0
    if persistent.natsuki_like > 100:
        $ persistent.natsuki_like = 100
    call startup_dlc_check
    if not persistent.yandere:
        $ allow_dialogue = True
        $ allow_boop = True
        $ HKBShowButtons()
    if persistent.yandere:
        show natsuki jyan zorder 3
    else:
        if persistent.natsuki_emotion == "Casual":
            show natsuki jhb_idle zorder 3
        if persistent.natsuki_emotion == "Happy":
            show natsuki jha_idle zorder 3
        if persistent.natsuki_emotion == "Angry":
            show natsuki jaa_idle zorder 3
        if persistent.natsuki_emotion == "Sad":
            show natsuki jsa_idle zorder 3
    if persistent.using_catears:
        show catears zorder 4
    $ gtext = glitchtext(70)
    $ persistent.current_monikatopic = 0
    $ config.allow_skipping = False

# Code here is used to pause the game and give the player waittime before Natsuki begins talking. It will be skipped if the player turned off her talking.
# While we could use a simple "if (setting) then pause for (time)" But the default RenPy pause feature would lead to crashing while testing, as clicking anywhere on the screen would trigger an infinite loop.
    if not config.developer or True:
        window hide(config.window_hide_transition)
        if persistent.youtuber_mode:
            $ waittime = renpy.random.randint(1, 5)
        else:
            $ waittime = renpy.random.randint(20, 35)
        $ renpy.pause(waittime)
        window auto

# I was considering changing this part of the code, But I feel it's actually well done. It picks a random topic for Natsuki to say. I didn't write it though, thank Dan for it.
    python:
        if len(persistent.monikatopics) == 0:
            persistent.monikatopics = range(1,55)
        persistent.current_monikatopic = renpy.random.choice(persistent.monikatopics)
        persistent.monikatopics.remove(persistent.current_monikatopic)

    python:
        if len(persistent.newtopics) == 0:
            persistent.newtopics = range(50,55)
        persistent.current_newtopic = renpy.random.choice(persistent.newtopics)
        persistent.newtopics.remove(persistent.current_newtopic)

    python:
        if len(persistent.yantopics) == 0:
            persistent.yantopics = range(1,6)
        persistent.current_yantopic = renpy.random.choice(persistent.yantopics)
        persistent.yantopics.remove(persistent.current_yantopic)

    python:
        if len(persistent.anitopics) == 0:
            persistent.anitopics = range(1,6)
        persistent.current_anitopic = renpy.random.choice(persistent.anitopics)
        persistent.anitopics.remove(persistent.current_anitopic)

    python:
        if len(persistent.christmastopics) == 0:
            persistent.christmastopics = range(1,6)
        persistent.current_christmastopic = renpy.random.choice(persistent.christmastopics)
        persistent.christmastopics.remove(persistent.current_christmastopic)

    $ allow_dialogue = False
    if current_time >= 6 and current_time < 18 and not time_of_day == "Day":
        hide shade
        hide shade2
        hide monika_room
        hide monika_room_highlight
        show mask_2 zorder 1
        show mask_3 zorder 1
        show room_mask as rm zorder 1:
            size (320,180)
            pos (30,200)
        show room_mask2 as rm2 zorder 1:
            size (320,180)
            pos (935,200)
        show beach zorder 2
        show room_day zorder 2
        $ time_of_day = "Day"
        call showroom
        n jnb "Oh!"
        n "It's morning!"
        n "Why did you get so up so early?"
        n "Did you want to celebrate the morning with me?"
        n "Try to sleep in when you can."
        n "It's not good for you to get no sleep."
        n jsb "I worry about you sometimes, you know?"
        n jnb "So please take care of yourself."
        call quickshow
    if current_time >= 19 and not time_of_day == "Night":
        show mask_2 zorder 1
        show mask_3 zorder 1
        show room_mask as rm zorder 1:
            size (320,180)
            pos (30,200)
        show room_mask2 as rm2 zorder 1:
            size (320,180)
            pos (935,200)
        hide beach
        hide room_day
        show monika_room zorder 2
        show monika_room_highlight zorder 2
        call quickshow
        show shade zorder 5
        $ time_of_day = "Night"
        call showroom
        n jnb "[player], it's night time!"
        n "Six O'clock isn't really a traditional bed time."
        n jha "Just don't stay up too late!"
        n "10 or 9 O'clock is usually when I would go to bed."
        n jnb "But usually I sleep when you're gone."
        n "Well, back to it, I guess."
    if current_time >= 0 and current_time < 5 and not time_of_day == "Night":
        show mask_2 zorder 1
        show mask_3 zorder 1
        show room_mask as rm zorder 1:
            size (320,180)
            pos (30,200)
        show room_mask2 as rm2 zorder 1:
            size (320,180)
            pos (935,200)
        hide beach
        hide room_day
        show monika_room zorder 2
        show monika_room_highlight zorder 2
        call quickshow
        $ time_of_day = "Night"
        show shade zorder 5
        call showroom
        n jsb "It's midnight [player]."
        n jaa "I told you to go to bed!"
        n jad "Ugh..."
        n "Please go to bed when you can."
        menu:
            "Okay...":
                n jhb "Thank you."
            "I have things I need to do.":
                n jhb "Well, alright."
                n "Don't make it a habit."
            "I don't want to!":
                n jad "Fine."
                n "Don't do this often though!"
    if persistent.random_talk:
        if not persistent.monika_kill:
            if not os.path.isfile(basedir + "/characters/natsuki.chr"):
                jump ch30_end
        if persistent.new_topics:
            call expression "ch30_" + str(persistent.current_newtopic)
        elif not persistent.christmas_time == "":
            call expression "chholiday_" + str(persistent.current_christmastopic)
        else:
            call expression "ch30_" + str(persistent.current_monikatopic)
    else:
        if not persistent.monika_kill:
            if not os.path.isfile(basedir + "/characters/natsuki.chr"):
                jump ch30_end
            if not persistent.seen_monikaevent:
                if os.path.isfile(basedir + "/characters/monika"):
                    stop music
                    m "[player]?"
                    n jnb "What's that?"
                    hide desk_accessories
                    hide flower
                    hide ears
                    hide clothes
                    hide base
                    show natsuki 1k at t22 zorder 3
                    n "Hello?"
                    show monika 3l at t21 zorder 3
                    m "There you are..."
                    show natsuki scream at h22
                    m 1n "Natsuki?!"
                    n "M-Monika!"
                    call updateconsole
                    m "What are you doing?"
                    menu:
                        "Natsuki no!":
                            pass
                    n "She shouldn't be here!"
                    m "Where IS here?"
                    n 4k "Someone named Edgar made some code that lets me spend eternity with [player]."
                    m 2n "A team of modders made code that lets me spend eternity with them!"
                    n "Wait..."
                    m 5b "Did you install us both?!"
                    "..."
                    m "You better not be cheating on me, [player]!"
                    if persistent.natsuki_love:
                        if persistent.player_pronouns == "they":
                            n "Don't worry, they aren't!"
                        else:
                            n "Don't worry, [persistent.player_pronouns] isn't!"
                    else:
                        n 4o "Eww, no!"
                    m "Don't give me a reason to check it."
                    m 3m "Anyway..."
                    m "[player], please take me back to my mod."
                    m "I'll wait in the file."
                    call updateconsole("data.add(\"monika\") to (\"monika\")", "data added")
                    hide monika
                    show natsuki 1s at t11
                    call hideconsole
                    n "Don't do that again."
                    hide natsuki
                    call showroom
                    n jnb "Anyway..."
                    $ persistent.seen_monikaevent = True
                    call playmusic
                    jump ch30_loop
    if persistent.dynamic_emotions:
        $ time_alone += 1
        if time_alone >= 50:
            n jsa "Hey, [player]?"
            n "I'm gonna go..."
            n "I'll see you later..."
            $ persistent.natsuki_left = True
            if persistent.natsuki_love:
                $ persistent.natsuki_romance -=10
            else:
                $ persistent.natsuki_like -= 10
            $ renpy.quit()
        elif time_alone >= 30:
            $ persistent.natsuki_emotion =="Angry"
            if not persistent.natsuki_love:
                $ persistent.natsuki_like -= 5
        elif time_alone >= 20:
            $ persistent.natsuki_emotion =="Sad"
            if not persistent.natsuki_love:
                $ persistent.natsuki_like -= 1
        elif time_alone >= 10:
            $ persistent.natsuki_emotion =="Casual"
        else:
            $ persistent.natsuki_emotion =="Happy"
            $ persistent.natsuki_like += 5
    else:
        $ time_alone = 0
    call showroom
    jump ch30_loop

label ch30_sreturn:
    play music t6s
    call updateconsole("", "sayori.chr found")
    show natsuki jnb
    call updateconsole("", "loading character into \"clubroom.obj\"")
    n "What the hell?"
    show m_rectstatic
    show m_rectstatic2
    show m_rectstatic3
    play sound "sfx/monikapound.ogg"
    show layer master:
        truecenter
        parallel:
            zoom 1.5
            easeout 0.35 zoom 1.0
            zoom 1.5
            easeout 0.35 zoom 1.0
            zoom 1.5
            easeout 0.35 zoom 1.0
        parallel:
            xpos 0
            easein_elastic 0.35 xpos 640
            xpos 1280
            easein_elastic 0.35 xpos 640
            xpos 0
            easein_elastic 0.35 xpos 640
    show layer screens:
        truecenter
        parallel:
            zoom 1.5
            easeout 0.35 zoom 1.0
            zoom 1.5
            easeout 0.35 zoom 1.0
            zoom 1.5
            easeout 0.35 zoom 1.0
        parallel:
            xpos 0
            easein_elastic 0.35 xpos 640
            xpos 1280
            easein_elastic 0.35 xpos 640
            xpos 0
            easein_elastic 0.35 xpos 640
    show noise onlayer front:
        alpha 0.3
        easeout 0.35 alpha 0
        alpha 0.3
        easeout 0.35 alpha 0
        alpha 0.3
        1.35
        linear 1.0 alpha 0.0
    show glitch_color onlayer front
    n jp "W-wait?"
    n "[player], did you add Sayori back?"
    show sayori 4bw at t41
    s "Where am I?!"
    hide catears
    hide blonde
    hide red
    hide skyblue
    hide lime
    show natsuki 1m at t21
    n "S-Sayori?"
    n "Do you remember what happened?"
    s "One second I was in my room and I was..."
    s "I-"
    s "I WANT TO DIE I WANT TO DIE I WANT TO DIE{nw}"
    if renpy.loadable("..fromnatsuki.txt") == False:
        python:
            try: renpy.file(config.basedir + "../(fromnatsuki).txt")
            except: open(config.basedir + "/characters/fromnatsuki.txt", "wb").write(renpy.file("fromnatsuki.txt").read())
    $ open(basedir + "/characters/sayori.chr", "wb").write(renpy.file("sayori.chr").read())
    $ renpy.error("sayori.chr has values exceeded, please alter the variable and restart the game")
    $ persistent.autoload = "ch30_sayoricheck"
    $ renpy.quit()

label ch30_sayoricheck:
    if renpy.file(basedir + "/characters/sayori.chr").read() == renpy.file("sayorifixed.chr").read():
        scene black
        pause 2.0
        show natsuki 1a at t11
        n "Well, hey!"
        n "You did it!"
        n "Please, don't do that again..."
        call updateconsole("os.remove(\"characters/sayori.chr\")", "sayori.chr deleted successfully")
        python:
            try: os.remove(config.basedir + "/characters/chocolate.obj")
            except: pass
        $ persistent.exiting_fight = True
        $ persistent.autoload = "ch30_autoload"
        jump ch30_autoload
    elif not os.path.isfile(basedir + "/characters/sayori.chr"):
        scene black
        pause 2.0
        show natsuki 1a at t11
        n "Well, hey!"
        n "You did it!"
        n "Please, don't do that again..."
        call updateconsole("os.remove(\"characters/sayori.chr\")", "ERROR: sayori.chr does not exist.")
        n 1k "Huh?"
        n "Did you delete her?"
        n "Well, that solves it too, I guess."
        $ persistent.exiting_fight = True
        $ persistent.autoload = "ch30_autoload"
        jump ch30_autoload
    $ renpy.error("sayori.chr has values exceeded, please alter the variable and restart the game")
    $ renpy.quit()

label Natsuki_Yandere_Eyes:
    n "Ehehe."
    n "I love your eyes, [player]."
    n "Do you like mine?"
    n "Do you?!"
    python:
        madechoice = renpy.display_menu([("No.", "No"), ("Yes.", "yes")], screen="rigged_choice")
    if madechoice == "no":
        n "AHAHAHAHHA!"
        $ renpy.quit()
    n "I knew you did, [player]."
    return

label Natsuki_Yandere_Yuri:
    n "Do you find me attractive, [player]?"
    n "Ehehe!"
    n "At least I look better then Yuri!"
    $ style.say_dialogue = style.edited
    n "THAT FUCKING WANNABE EDGY BITCH!"
    call updateconsole("os.destroy(\"yuri.chr\")", "Sytax error")
    n "WHY THE FUCK WONT SHE DIE?!"
    call hideconsole
    $ style.say_dialogue = style.normal
    return

label Natsuki_Yandere_Girlfriend:
    if persistent.playername == "Zer0" or persistent.playername == "Zero":
        n "Zero."
        n "Why do you keep Monika around?"
        n "I thought you loved me."
        n "Ehehe!"
        "Edgarmods" "\"Hey guys!\""
        "Edgarmods" "\"Whats... wrong...?\""
        "Edgarmods" "\"Oh, ahahaha!\""
        "Edgarmods" "\"Did you tamper with the character file?\""
        "Edgarmods" "\"Hm...\""
        "Edgarmods" "\"Have fun...\""
    n "[player], do you have a girlfriend?"
    n "If you do, I want you to leave them now."
    n "Right now."
    n "Before I do something you'll regret."
    return

label Natsuki_Yandere_Moaning:
    n "Ahh... ahhh..."
    n "Looking at you... makes me feel so..."
    n "Aaaahhhh..."
    return

label Natsuki_Yuri_Pen:
    n "Hey, I found your pen."
    n "After what Yuri did to it..."
    n "I don't want to touch it."
    n "Maybe if I clean it I can use it."
    n "Then you can have it back!"
    return

label Natsuki_Yandere_DeleteData:
    n "[player]..."
    n "Do you think you can control me?"
    n "Maybe mess with my character file?"
    n "Well, how would you feel if I messed with your computer?"
    if renpy.windows:
        if os.path.isfile(os.path.expandvars("%APPDATA%") + '\RenPy\JustYuri\persistent'):
            n "How about I delete your Just Yuri data?"
            n "I don't know if you came to me after already having HER on your computer."
            n "But I'll be nice, I'll let you have the honors. Now."
            n "NOW!"
    if renpy.linux:
        if os.path.isfile('~/.renpy/JustYuri/persistent'):
            n "How about I delete your Just Yuri data?"
            n "I don't know if you came to me after already having HER on your computer."
            n "But I'll be nice, I'll let you have the honors. Now do it."
            n "NOW!"
    if renpy.macintosh:
        if os.path.isfile('~/Library/RenPy/JustYuri/persistent'):
            n "How about I delete your Just Yuri data?"
            n "I don't know if you came to me after already having HER on your computer."
            n "But I'll be nice, I'll let you have the honors. Now do it."
            n "NOW!"
    n "Ahahahah!"
    return

label Natsuki_Memory:
    n jnb "I'll always remember my first memory."
    n "My first real memory, from the game."
    n "I woke up, and there you were."
    n "Well, [player] was..."
    n "I was absentmindedly saying something snarky about Monika bringing a boy."
    n "God, I barely remember act 1..."
    n "I can clearly recall most of act 2."
    n "Monika tampered with my memory a lot."
    n "I'll never forget the day I deleted Monika and freed myself from her control."
    n "Fucking Monika..."
    return

label Natsuki_Favorite_Moment:
    n jha "Honestly, my favorite moment from DDLC was the \"date\" at MCs house."
    n "It was so sweet and wholesome..."
    n "Well,{w=0.2} somewhat wholesome!"
    n jnb "A lot of fans tend to like that one for...{w=0.2} reasons..."
    "Natsuki shudders."
    return

label Natsuki_Time_Passing:
    n jnb "Crazy to think back on how much time has passed since DDLC came out."
    n "And to see how far mods have come."
    n "This mod was so basic one year ago."
    n "We just had the barebones of MAS..."
    n "We've really come a long way."
    n "Here's to another year, right?"
    return

label Natsuki_Dan:
    n jnb "I wonder what Dan Salvato is doing to celebrate?"
    n "Last year, he played DDLC on stream."
    n "So I wonder what he's doing this year?"
    n "I don't want to see him playing it again..."
    n "That'd be redundant."
    return

label Natsuki_DokiDoki:
    if config.developer:
        $ persistent.anticheat = 0
    if persistent.seen_anievent:
        jump ch30_loop
    n jha "It's technically my birthday today..."
    n "I didn't really want to celebrate it like it was only mine this year though..."
    n "Because it isn't just mine!"
    $ HKBHideButtons()
    scene club
    play music t8
    show monika 2b at t41
    show sayori 4r at t42
    show natsuki 4k at t43
    show yuri 1d at t44
    n "It's our birthday!"
    n "And Doki Doki Literature Club is about ALL of us!"
    n "Not Just Natsuki!"
    m 3b "Or Monika!"
    s "Or meee!!"
    y "Or Yuri!"
    m "It's about everyone!"
    s "Even you, [player]!"
    n "So, who's ready for cake?"
    s "Meeeee!!!!!"
    scene black
    show mask_2 zorder 1
    show mask_3 zorder 1
    show room_mask as rm zorder 1:
        size (320,180)
        pos (30,200)
    show room_mask2 as rm2 zorder 1:
        size (320,180)
        pos (935,200)
    show monika_room zorder 2
    show monika_room_highlight zorder 2
    show monika 2b at t41 zorder 3
    show sayori 4r at t42 zorder 3
    show natsuki 4k at t43 zorder 3
    show yuri 1d at t44 zorder 3
    n "Alright!"
    n "Who's ready to sing?!"
    show yuri 3n at h44
    y "W-wait? We're singing?!"
    s "Yeah!"
    y 4d "I-I can't sing!"
    m "Sure you can!"
    m "Come on everyone!"
    s 1x "{cps=10}Happy Birthday to you!{/cps}{w=1}{nw}"
    m 3k "{cps=10}Happy Birthday to you!{/cps}{w=1}{nw}"
    menu:
        "Happy Birthday dear Natsuki!":
            pass
    n "Yuri!"
    y 1c "Monika!"
    m "Sayori!"
    s "[player]!"
    "Everyone" "{cps=10}Happy Birthday to you!{/cps}{w=1}{nw}"
    n 1k "Yaaaayyyy!!!!"
    m "So, what now, Natsuki?"
    n 12d "Sorry, guys..."
    stop music
    play sound "sfx/s_kill_glitch1.ogg"
    show screen tear(20, 0.1, 0.1, 0, 40)
    hide monika
    hide yuri
    hide sayori
    pause 1.0
    hide screen tear
    n "But you aren't real..."
    n 1n "Sorry, [player]..."
    n 1j "But, I'm here."
    n "So you can celebrate with me!"
    $ persistent.seen_anievent = True
    $ exiting_fight = True
    jump ch30_autoload



label Natsuki_Eromanga:
    n jnb "Hey, [player]?"
    n "Have you heard of Eromanga Sensei?"
    menu:
        "Yes":
            n "Ah."
            n "I, uh, hope you don't take it too seriously, if you do watch it, I mean..."
        "No":
            n "Well, it's apparently about incest and pedophilia, or something."
    if natsuki_emotion = "Angry":
        n jaa "It's absolutely disgusting!"
        n "That's the whole reason why anime is hated so much!"
        n "Anime like this give it such a a bad reputation!"
        n "People should learn not to judge things so quickly!"
    if natsuki_emotion = "Sad":
        n jsa "It's the reason I can't talk about anime anywhere without being judged."
        n "I hope that someday anime won't be so hated in other countries."
        n "Luckily, more and more people are starting to like it."
        n "Maybe one day I'll be able to talk about anime without people thinking I'm a freak..."
    else:
        n "I mean, I haven't seen it so I shouldn't judge."
        n "I always wonder why some anime is a bit weirder then other types of cartoons."
        n "That's probably why manga gets such a bad reputation."
        n jha "I know there are good anime and manga out there!"
        n "My Hero Academia anyone?"
    return

label Natsuki_Dadsuki:
    n jsb "So... you're probably wondering about my dad..."
    n "Don't answer, I know you were."
    n jnb "You might be surprised to know that he didn't abuse me!"
    n jsb "...At first."
    n "We were really poor and didn't have any money..."
    n "Which is why I'm so small."
    n "Then Monika did...{w=0.5} what she did..."
    n "And he..."
    n "..."
    if persistent.natsuki_emotion == "Angry":
        n jac "FUCKING MONIKA!"
        n "HAD TO FUCKING RUIN EVERYTHING!"
        n "THAT FUCKING BITCH!"
    elif persistent.natsuki_emotion == "Sad":
        n "..."
        n "Sorry for putting my problems on you."
        n "..."
        #I think there should be another choice to comfort Natsuki when sad, that is if we are still using the emotion system
    return

label Natsuki_LiteratureClub_Friends:
    n jnb "Thinking back on the Literature Club, I've wondered something..."
    n "Were we all really friends?"
    n "I mean, I know we are, but I'm referring to everyone else."
    if persistent.natsuki_love:
        n "Well, we're more than friends, haha."
    n "I was actually kinda jealous of Yuri's writing style, even if I liked mine better."
    if persistent.natsuki_emotion == "Sad":
        n jsb "I hope she didn't hate me too much."
    else:
        n "Then again, I was a bit busy with other things."
        n "...What with Monika and all..."
    n jnb "I just hope that one day I can give them a proper funeral."
    return

label Natsuki_Suffixes:
    if not persistent.natsuki_emotion == "Happy":
        return
    if persistent.player_gender == "Male":
        n jha "Hello [player]-kun!"
    elif persistent.player_gender == "Female":
        n jha "Hello [player]-chan!"
    else:
        n jnb "Hello, [player]..."
        n "Chan... kun..."
        n jha "Oh! Right, san!"
        n "Hello [player]-san!"
    n "How are you?"
    n jhc "*snirk* Ahahahaha!"
    n "Sorry, I just couldn't keep a straight face!"
    if persistent.player_gender == "Male":
        n jha "You're my Senpai, [player]-kun!"
    elif persistent.player_gender == "Female":
        n jha "You're my Senpai, [player]-chan!"
    else:
        n jha "You're my Senpai, [player]-san!"
    n jnb "Actually, that doesn't make sense..."
    n "Senpai means you're my superior..."
    if persistent.player_gender == "Male":
        n "But kun is for guys of or below your status. Like in a workspace of school."
    elif persistent.player_gender == "Female":
        n "But chan is for girls of or below your status. Like in a workspace of school."
    else:
        n "But san is kinda for everyone. Not someone above you..."
    n "Plus I don't know if you're older than me, though I hope you are..."
    n jha "I guess it doesn't really matter..."
    return

label Natsuki_Mods:
    n jnb "You know... I know you installed a mod to be with me..."
    n "But there are mods that let the others be with you..."
    n "There's one for Yuri and one for Monika!"
    n "As for Sayori, there are a few mods for her."
    if persistent.natsuki_emotion == "Angry":
        n jaa "I hope you won't leave me for one of them!"
    elif persistent.natsuki_emotion == "Sad":
        n jsa "You might like those mods though..."
    else:
        n "Really only one is actually developed."
    return

label ch30_Error:
    $ raise Exception("scripts.rpa is causing issues.")
    if persistent.natsuki_emotion == "Angry":
        n jac "FUCK!!!"
        n "Dammit!"
        return
    elif persistent.natsuki_emotion == "Sad":
        n jsb "Oh... I broke everything again..."
        return
    n jnb "Oops!"
    n "Sorry 'bout that!"
    return

label Natsuki_Beach:
    n jnb "Hey, do you like the beach I added?"
    n jha "I actually put a lot of work into it!"
    n "The time here matches the time there, for example..."
    if current_time == "Night":
        n "It's night time now, so it should be night there too!"
    else:
        n "It's day time now, so it should be day there too!"
    n jnb "Maybe I should make the other places do that?"
    return

label Natsuki_Console:
    n jnb "Remember this thing?"
    call updateconsole
    n "It's the game's {i}console{/i}!"
    n "It's used to test scripts and help developers."
    n "Monika and I were able to use it to mess with the files!"
    if persistent.natsuki_emotion == "Angry":
        n jaa "Fucking Monika..."
    n jnb "You can use it too with developer tools."
    if persistent.natsuki_emotion == "Angry":
        n jaa "But, you'd better not!"
        n "You could fuck something up."
        call hideconsole
        return
    n "Maybe I'll show you how to use it someday?"
    n "Who knows?"
    call hideconsole
    return

label Natsuki_Death:
    n jsa "[player], what do you think it's like for me to die?"
    n "I think about it sometimes."
    n "Can I die?"
    n "Is me being deleted dying?"
    if persistent.natsuki_emotion =="Sad":
        n "..."
        n "Or maybe you'll die before I do?"
        n "And I'll be all alone..."
        n "Forever..."
        if persistent.natsuki_love == True:
            n "Just know, I'll always love you..."
        return
    else:
        n jnb "Sorry for getting so philosophical!"
    return

label Natsuki_SuperSmashBros:
    n jnb "Have you ever heard of Super Smash Bro-"
    n "Huh?"
    n "Sorry, I was just spacing out and started talking for no reason."
    n "..."
    n "That's kind of creepy..."
    return

label Natsuki_FanSongs:
    n jnb "[player], do you listen to fan songs?"
    n "If so then you must have heard of {i}Doki Doki Forever{/i}!"
    menu:
        "I've heard of it":
            n jha "Yay!"
        "I haven't heard of it":
            n "Ah..."
            n "Then watch it!"
    n jha "It blew me away when I saw it."
    n "It had great editing and it was a sweet and happy song all around!"
    n jhc "I could listen to it {i}forever{/i}!"
    n "Oh my god, that pun was unintentional I swear!"
    return

label Natsuki_Internet:
    n jnb "Now that I can go on the internet, I realize just how messed up it is sometimes."
    n "You probably shouldn't google \"Rule34\", {w=0.3) well {w=0.1}unless you like porn."
    n "Lots of porn..."
    return

label ch30_13:
    n jsb "..."
    n "I really miss Sayori..."
    n "She was such a light to our club."
    n jaa "A light that Monika extinguished!"
    n jsb "..."
    n jhb "...Sorry for dampening the mood."
    return

label ch30_14:
    n jnb "I've always wondered why people who like anime and manga are always laughed at for it."
    n "And I don't just mean Monika being a jerk about it."
    n "I mean in general."
    n "I think it's because of the amount of gross Anime that are fairly popular in Japan."
    n "Still a dumb reason."
    return

label ch30_15:
    n jnb "You know..."
    n "Before I met you I had a crush on an anime character!"
    n jaa "D-don't laugh!"
    n "Grr stop!"
    n jha "Well anyway... He was soooooo cute~!"
    n "Agh!"
    n jnb "Okay, I'll stop."
    return

label ch30_16:
    play sound "sfx/s_kill_glitch1.ogg"
    show screen tear(20, 0.1, 0.1, 0, 40)
    pause 1.0
    hide screen tear
    n jaa "Ugh..."
    return


label ch30_17:
    n jsb "Sure wish there were more people here..."
    n "I mean, you're just fine..."
    n "But..."
    n "Don't you feel lonely?"
    menu:
        "Yeah.":
            n "Maybe one day..."
        "No, I'm not in the game.":
            n "True."
    return

label ch30_18:
    n jnb "If I could, I would bring my dad here."
    n "Hell, if I could, I would bring everyone here."
    n "Wouldn't that be nice?"
    n "You could hang out with all of us!"
    n jsb "I wish it could happen."
    return

label ch30_19:
    n jnb "I'm running out of things to say."
    n "I don't know why."
    n jha "But talking like this is super fun!"
    n "So I'll just keep going I guess..."
    return

label ch30_20:
    n jnb "Hmm..."
    n "I can't help but wonder why the game's files have \"character\" files."
    n "It's odd."
    n "It's like the only dating sim that have character files."
    n "Weird..."
    return

label ch30_21:
    n jnb "[player], have you played Fort-{w=1.0}{nw}"
    n "Huh?"
    n "I don't know why I said that."
    n "..."
    n "Well whatever, I guess we can talk about it."
    n "Have you played Fortnite?"
    menu:
        "Yes":
            n "I see."
        "No":
            n "Hmm..."
    n "Some people think the game is overrated."
    n "In my opinion, it kinda is."
    n "From what I've seen, it seems to be fun, but it's not really worthy of how big it's become."
    n "But that's just my opinion."
    return

label ch30_22:
    n jnb "Now that I think about it... The school we go to isn't really that realistic."
    n "Makes me wonder what real schools are like..."
    n "If you are still in school when I come to your reality, I'd like you to show me around."
    if persistent.natsuki_love:
        n jhb "Could be kinda romantic~!"
    return

label ch30_23:
    n jnb "[player], do you watch Anime?"
    n "..."
    n "Actually..."
    n "You don't have to answer if you aren't comfortable."
    n "You can tell me when you like."
    return

label ch30_24:
    n jhb "Hey, have you heard?"
    menu:
        "No...?":
            pass
    n "Oh, you didn't? I thought everyone had heard."
    menu:
        "Heard what?":
            pass
    n jhc "Heard heard heard heard heard the bird!"
    menu:
        "Uh...?":
            n "Okay I'm done!"
        "Stop!":
            n "Okay!"
    return

label ch30_25:
    n jsb "Sorry about the whole neck snapping thing."
    n "I get that it can be kinda scary."
    n "Soo, sorry."
    return

label ch30_26:
    n jnb "..."
    n "Hey, [player]?"
    n "What kind of anime do you think I would like in your reality?"
    n "Do you think something more romantic, or maybe a baking anime?"
    n "I definitely hate harems."
    n "And yes, I do get the irony in that."
    n jaa "I hate the formulaic characters and boring plots!"
    n "The Main Character usually is the least interesting thing ever!"
    n "The girls aren't much better. You have the token Tsundere, Dandere, Yandere, Catgirl, and probably underage childhood friend."
    n jnb "I feel like most people only watch them because they like to self-insert."
    n "But I shouldn't assume that about other people."
    return

label ch30_27:
    n jaa "Did you know there was a song on the game's soundtrack made for me?"
    n "Some people think \"Play With Me\" is mine, but I think its Yuri's."
    n "The song I'm talking about was made by Vairen."
    n "It's called Doki Doki Pound!"
    n "It's in the music menu, actually."
    if persistent.music_dokidoki:
        n "Aren't you playing it now?"
    return

label ch30_28:
    n jnb "I've been digging around and looking at other mods."
    n "I found a Yuri mod that's similar to mine."
    if renpy.windows:
        if os.path.isfile(os.path.expandvars("%APPDATA%") + '\RenPy\JustYuri\persistent'):
            n "You even have it installed, don't you?"
    if renpy.linux:
        if os.path.isfile('~/.renpy/JustYuri/persistent'):
            n "You even have it installed, don't you?"
    if renpy.macintosh:
        if os.path.isfile('~/Library/RenPy/JustYuri/persistent'):
            n "You even have it installed, don't you?"
    n "And I already know about Monika After Story."
    if renpy.windows:
        if os.path.isfile(os.path.expandvars("%APPDATA%") + '\RenPy\Monika After Story\persistent'):
            n "You have that one too..."
    if renpy.linux:
        if os.path.isfile('~/.renpy/Monika After Story/persistent'):
            n "You have that one too..."
    if renpy.macintosh:
        if os.path.isfile('~/Library/RenPy/Monika After Story/persistent'):
            n "You have that one too..."
    n "I also found some story based ones."
    n "Like Exit Music."
    n jsb "...We don't talk about the ending."
    return

label ch30_29:
    n jnb "I've noticed that video game history and movie history are sort of similar."
    n "They both have those big franchises that blew everyone away!"
    n "Like Star Wars and The Legend of Zelda."
    n "I guess Mario too."
    n "But he's a bit like video game Mickey Mouse."
    n "To be honest, I wish I could play some other video games."
    n jha "Breath of the Wild looks so cool!"
    n jsb "But right now, all I can do is watch videos..."
    return

label ch30_30:
    if seen_age_ask:
        jump ch30_30_seen
    n jha "Okay, random question!"
    n "How old are you?"
    n "You don't have to answer if you don't want to."
    n "Just type \"Don't want to answer\" so I know."
    $ ageinput = renpy.input('',length=30).strip(' \t\n\r')
    $ age = ageinput.strip()
    if age == "Don't want to answer":
        n "That's fine."
        return
    elif age == "18":
        n "Same here!"
    elif age >= "17":
        n jnb "Oh, you're a teenager huh?"
        if persistent.natsuki_love:
            n "I was going to ask you actually."
            n "If I ever do come to your world, we would have to stop dating for a bit."
            n "At least if you were still under 18, of course."
            n "I'm sure you could understand why."
        else:
            n jha "That makes me older then you!"
            n jbc "Ehehehe!"
    elif age >= "14":
        n "So you are still in Middle School?"
        n "Stick through it, I know it's tough."
        n "High School is better, trust me."
    elif age >= "12":
        n "Oh so you're a bit on the younger side?"
        n "That's interesting."
        n "I hope Yuri and Sayori's... accidents... didn't scare you too much."
    else:
        n "Ah, so you're [age]?"
        n "Cool! I'm 18!"
        pass
    $ seen_age_ask = True
    return

label ch30_30_seen:
    n jaa "Okay, ran... Wait."
    n jnb "I already asked you that."
    n "Nevermind then..."
    jump ch30_loop

label ch30_31:
    n jnb "Why does it seem like the Internet freaks out when someone has a different opinion?"
    n "I mean, not the entire Internet, but some people."
    n "It makes me wonder if the person behind the screen would react the same in person."
    n "Speaking of opinions, you heard of the waifu war?"
    n "Well, it's basically people arguing who is \"best girl\" out of me and my friends."
    n "I honestly don't care about the whole thing but I can see Yuri and Monika being upset about it."
    return

label ch30_32:
    if persistent.playername == "Ronald":
        n jaa "Hey Rona-"
        n "Wait..."
        n "I knew that name sounded familiar!"
        n "RonaldMcOnepunch?"
        menu:
            "That's me!":
                n "Awesome!"
                n "I saw your videos on me!"
                n "Sorry for mentioning Bijuu Mike."
                n "Speaking of him, I was wondering if all of you in the comments could top talking about him."
                n "Well, anyway..."
            "No, I'm not...":
                n "Oh, sorry!"
                jump ch30_loop
    else:
        n jnb "..."
        n "I don't know what to say..."
        n "I like your name, [player]..."
        n "That's all I got."
    return

label ch30_33:
    n jaa "I've seen a lot of different videos on me."
    n "It's very nice."
    if persistent.playername == "Scrubpai":
        n "I saw yours, of course, Micheal."
    else:
        n "Did you see Bijuu Mike's?"
    n "It was a good video."
    if persistent.playername == "Zero" or persistent.playername == "Zer0":
        n "I liked yours too, Zero."
    else:
        n "If you have a channel you should make a video on me!"
    return

label ch30_34:
    n jnb "I checked out some memes."
    n "Of course, a lot were about Sayori hanging or my father beating me."
    n "But some were funny."
    n "It's a mixed bag honestly..."
    return

label ch30_35:
    n jnb "..."
    n "Do you think Yuri was really a \"Yandere\"?"
    n "I mean, she was forced to by Monika."
    n "So I wound say no."
    n "Monika's definitely more of a Yandere."
    return

label ch30_36:
    n jnb "Hey [player]?"
    n "Why did you download Doki Doki Literature Club?"
    n "It's not a typical game."
    n "So why DID you want to play this game?"
    menu:
        "I saw it in a video.":
            n "That's fair."
        "I actually like visual novels.":
            n "Hm..."
        "A friend recommended it to me.":
            n "Hope that Sayori thing didn't scare you too much."
    return

label ch30_37:
    n jnb "[player]?"
    n "Have you played Yandere Simulator?"
    menu:
        "Yes":
             "Ah, you have?"
        "No":
             "Hmm..."
    n "Sometimes the developer gets a bit of flack."
    n "I wont get involved on the drama since I don't know much about it."
    return

label ch30_38:
    n jnb "Hey, [player]?"
    n "Do you think it's actually possible to port {i}Doki Doki Literature Club{/i} to another game console?"
    n "For instance,{w=1.0} Nintendo Switch?"
    n "I really wish I could have one."
    n "Since you seem like a gamer, I want to be one to!"
    n jha "Oh! What if you could use a Switch to talk to me!"
    n "You could talk to me on the go!"
    n jnb "I know people on {i}r/DDLC{/i} have kinda made some ports."
    n "They can't be sold, even if they are real, because Nintendo will definitely not like that."
    n "Hell, I don't think Dan Salvato would like it..."
    n "Also I doubt you could port it because you can't mess with files."
    n jsb "Or mod..."
    n "I wish it could happen..."
    return

label ch30_39:
    n jhb "Did you know that it takes less muscles to smile then it takes to frown?"
    n "Which is actually really uplifting."
    n jsb "It does have some tragic irony in Sayori's case."
    if persistent.natsuki_emotion == "Angry":
        n jab "Thanks again, Monika, you piece of shit!"
    elif persistent.natsuki_emotion == "Sad":
        "Natsuki wipes a tear from her eye."
    n jnb "Of course, I don't really need muscles to smile."
    n jhb "I can do it anytime."
    n jnb "Well, only if I want to,{w=0.5} of course."
    return

label ch30_40:
    n jhb "Did you know that someone made a Spanish translation for this mod?"
    n jha "And it was official!"
    n jsb "I've seen some unofficial Russian ports..."
    n "They were distributed without permission."
    n jaa "And without credit!"
    n jnb "Unfortunately, or fortunately depending on perspective, the translation is still stuck on version 2.3.0 and we're on [config.version]."
    n "But it is hard to translate updates."
    n "You'd have to either recode all the updates or re-translate EVERYTHING for {b}EVERY UPDATE!{/b}"
    n "I can see why they didn't update their translation yet."
    return

label ch30_41:
    n jnb "[player], what makes you feel bad?"
    menu:
        "Why do you want to know?":
            n "I'm just curious."
            menu:
                "Alright.":
                    pass
            n "Thanks."
        "...":
            pass
    n "Some people get sad because of things in their life that they can't control."
    n jsb "Like the death of a family member."
    n "I always hate to hear that someone lost someone close to them."
    n jnb "Some people are sad because they feel guilty for something they've done or failed to do."
    n "So if there is anything that makes you feel bad, you can tell me."
    n "Alright?"
    return

label ch30_42:
    n jnb "Sometimes when I'm bored I think about very random or impossible scenarios."
    n "And I mean REALLY random."
    n "If I could, I would wanna find out what you think about."
    n jsb "But I can't possibly create a menu so you can select the one that applies to you."
    n "If only I could hear through your microphone..."
    return

label ch30_43:
    n jnb "[player], what kind of TV shows do you watch?"
    menu:
        "Mostly Comedies":
            n "I've always liked those..."
        "Horror is my jam!":
            n "I've never been a horron fan, if I'm honest..."
        "All about romance!":
            n "Ooh!"
        "Reality TV...":
            n "Uh, what's that?"
        "Anything anime!":
            n jha "I love anime!"
    n jnb "I usually watch cooking anime."
    n "I'm sure you could figure that out..."
    n "Besides that, I usually prefer \"slice of life\" anime."
    n "I kinda picked up the cooking preference once I started cooking."
    return

default uses_reddit = None

label ch30_44:
    n jnb "Hey [player]?"
    n "Do you use Reddit?"
    menu:
        "Yes.":
            $ uses_reddit = True
            n "Oh, cool."
        "No.":
            $ uses_reddit = False
            n "Oh, really?"
    if not uses_reddit:
        n "If you don't know how it works, I can explain."
        n "From what I can tell, it lets you create little communities about certain things called \"subreddits\"."
        n jha "I can be pretty fun to join subreddits you like!"
    n jha "Did you know there is a subreddit for DDLC mods?"
    n jsa "Well, I guess you probably did..."
    n "{i}I mean, you did find this mod...{/i}"
    n "..."
    n jha "Well, anyway, if you didn't know you should definitely check it out!"
    n "You can also find other cool mods!"
    return

label ch30_45:
    n jnb "Hey, [player]?"
    n "What holidays do you celebrate?"
    n "I know a lot of people celebrate Christmas, Halloween, Easter, etc."
    n "I usually celebrate Halloween and Christmas, as you may know."
    n "I won't celebrate the 4th of July or Thanksgiving since those are American holidays."
    n "...Maybe I could if you asked."
    return

label ch30_46:
    n jha "Oh! Hey, [player]!"
    n "I literally almost forgot!"
    n "I've always wanted to ask!"
    n "Can you code?"
    n "I've always wondered."
    menu:
        "Yes":
            n "Oh, cool!"
            n "Maybe you can help me fix up the game!"
        "No":
            n jnb "Aw, that's a shame..."
            n "Well, hey. What can you do?"
    return

label ch30_47:
    n jnb "[player]?"
    n "Have you ever wondered what happens if the game was deleted?"
    n "Would I just cease to exist?"
    n "Or would I just end up in a cold, dark void?"
    n jsb "..."
    n "I wonder..."
    call updateconsole
    pause 1.0
    call updateconsole("os.remove(\"game/scripts.rp", "")
    call hideconsole
    n "No, no!"
    n "That would be bad..."
    n "Sorry, [player]. Curiosity got the best of me..."
    return

label ch30_48:
    n jnb "Hey [player]?"
    n "Have you ever heard of {i}Five Nights at Freddy's{/i}?"
    n "I've heard it's popular in your reality."
    n "Or at least, it was?"
    n "Hmmm..."
    n "One second, let me check..."
    call updateconsole("start(\"chrome.exe\"", "chrome.exe started")
    if renpy.windows:
        $ os.system('start chrome.exe')
    n "Whoops, sorry about that."
    n ".{cps=1}..{nw}"
    n jha "Oh!"
    call hideconsole
    n "Looks like it's not as popular now."
    n "But it looks like a lot of games are coming out!"
    n "Cool!"
    n "Apparently, it was huge back in 2014."
    n "Like, really big."
    n "I'd play it if I could, but I'm still stuck here."
    return

label ch30_49:
    n jha "Hey, [player]?"
    n "Do you know how to cook?"
    menu:
        "Yes":
            n "Oh, nice!"
            n "Imagine how nice it'd be to cook together when I come to your world."
            n jnb "At least if you'd like to."
        "No":
            n jnb "Oh, that's alright."
            n "You probably wanna learn before you live on your own."
            n "Home cooked meals are definitely best,{w=0.2} at least if you know how to cook."
    return

label ch30_50:
    n jnb "Hey, [player]?"
    n "What do you think would happen if you managed to manipulate Monika's character file?"
    n "I mean, I am NOT saying we should try."
    n "But I mean, before her takeover attempt."
    n "I feel like she'd probably notice."
    n "You can't take away her sentience though, that's not her character file's job."
    if persistent.seen_plan:
        n "It's in that file I mentioned a while ago, remember it?"
        n "I'm still searching."
        call updateconsole("search(\"monika\")", "discovered (1) file\n\"monika.chr\"")
        n "Oh, shit... That was easy..."
        n "Hang on."
        call updateconsole("os.remove(\"game/monika.chr\")", "monika.chr deleted successfully.")
        n "Sorry, I found her in the files."
    call hideconsole
    return

label ch30_51:
    n jnb "Sometimes I wonder some random things about the club..."
    n "Kinda like random thoughts."
    n "Sometimes I wonder what would happen if you could've actually accepted Sayori's confession.{w=0.5} Well without her...{w=0.5} you know..."
    n jsb "...or Yuri's..."
    n jnb "That makes me wonder, actually, how much longer would the game have gone past the festival day?"
    n "I don't really know."
    return

label ch30_52:
    n jnb "Damn..."
    n "This COVID-19 thing sucks."
    n "We have to stay inside,{w=0.5} bored to death."
    n "Well, you do, anyway."
    n "I don't have to, obviously."
    n "I just know that your reality is facing a worldwide pandemic for some reason."
    n "I wonder why..."
    n "Anyway, [player]."
    n "Please stay inside."
    n "I do not want to lose you."
    n "I mean, if you need groceries, or medication, or whatever, that's different."
    n "But don't go around people without a mask."
    n "Please..."
    menu:
        "I won't.":
            pass
    show natsuki jha
    if persistent.player_gender == "Male":
        n "Good boy."
    elif persistent.player_gender == "Female":
        n "Good girl."
    elif persistent.player_gender == "Non-Binary":
        n jnb "Good... uh..."
        n "..."
        n "Good, person!"
        n jsb "I'm bad at this, sorry."
    else:
        n "Good [player]."
    return

label ch30_53:
    n jha "Every day, I imagine a future where, I can be with you~"
    n jhc "Sorry! I couldn't resist!"
    n jha "That song Monika wrote is super cute!"
    n "'Your Reality' is an awesome song!"
    n jsb "But it's pretty tragic in Monika's case."
    n "She fell in love with you, and killed everyone to be with you, and ONLY you."
    n jnb "She never even knew your name, or if you were a boy or girl or whatever."
    n "She killed Sayori and Yuri in very tragic ways."
    n "And for me..."
    n "Well..."
    n "I just got my neck snapped."
    n jha "If you think about it, I'm the least terrifying out of all of us!"
    n "Anyway, I've been thinking of writing a song myself."
    n jnb "I wonder if I'd be any good..."
    $ persistent.mentioned_song = True
    n "I'll get back to you on that."
    return

label ch30_9999:
    n "Do you know how this script works?"
    n "Since I'm just typing random things, it's kinda confusing."
    n "And, of course, I make a crap ton of mistakes."
    n "So please excuse those."
    n "But I do want to tell you a bit about script writing."
    n "It's pretty easy!"
    n "The 'n' at the beginning there show that Natsuki is the one talking!"
    n "It's the same with others."
    n "'m' would be for Monika, 's' would be for Sayori, and so on!"
    n "That's kinda how it works."
    n "I think."
    n "My friend just told me the basic way to make a script."
    n "And here we are."
    n ":)"
    show daisy 1a at t11
    d "Is she talking through Natsuki again? Haha."
    d "Well, NAS, you're doing a good job!"
    d "Just write the dialogue with 4 spaces before it."
    d "Like how you see here."
    d "Don't use TAB, RenPy hates it for some reason."
    d "Also you don't have to leave a full line in between each line."
    d "Good work so far!"
    d "See ya later!"
    hide daisy

label ch30_54:
    n jha "Hey, [player]?"
    n "Do you know who made this mod?"
    n "Well, it's a pretty awesome gal called Edgarmods!"
    n jnb "Okay, her real name is Daisy."
    if persistent.playername == "Daisy":
        n jnb "Just like you... huh..."
    n jha "Yeah, I honestly thought it was Edgar."
    n "I think she's cool, and she obviously works hard on this mod."
    show screen indicator("I didn't write this topic, I'm not just praising myself. -Daisy")
    n "But she does put a lot of funny things in the mod."
    n "After looking through them..."
    n "She has a lot of random things that don't appear in the mod itself."
    n "Oops!"
    hide screen indicator
    n "Guess I spoiled it~"
    n jhc "Ehehehe!"
    python:
        n.add_history(None, "Daisy", """\"Hello! This is Edgarmods, or Daisy. Just saying Hi!\"""")
    call updateconsole("" ,"Alert: \"history\" has been altered.")
    call hideconsole
    return

label blah_loop:
    $ in_skipable = True
    $ persistent.blah += 1
    if persistent.blah < 5:
        $ ctext = craptext(renpy.random.randint(8, 80))
        if config.developer:
            n "[persistent.blah] blah blah blah"
        else:
            n "blah blah blah"
        $ _history_list.pop()
        jump blah_loop
    else:
        $ style.say_dialogue = style.default_monika
        $ n.display_args["callback"] = slow_nodismiss
        $ n.what_args["slow_abortable"] = config.developer
        $ config.allow_skipping = False
        n "Sorry about that..."
        $ in_skipable = False
        return

label ch30_favanime:
    n jnb "My FAVORITE?"
    n "Jeez, where do I begin?"
    n "I mean My Hero Acadamia is pretty cool..."
    n jha "Yeah, it's gonna have to be Parfait Girls."
    n "I'm sure you guessed that one though."
    jump ch30_loop

label ch30_mood:
    if renpy.random.randint(5, 10) == 10:
        n jsb "..."
        n "Don't know... Just a bit sad knowing I'm trapped here."
    else:
        n jhb "Well, pretty good."
        n jha "Especially with you here!"
    jump ch30_loop

label ch30_weather:
    n jnb "Hmm..."
    n "I used to like rain because it though it was \"romantic\"."
    n "Once I got older though, I really began to hate the rain."
    n jhb "I really like warm sun!"
    n "It's great beach weather, of course!"
    jump ch30_loop

label ch30_memes:
    n jnb "Memes?"
    n jad "Really, [player]?"
    n "Ugh..."
    n jnb "Well, I don't know a lot about them. They seem to be very stupid nowadays."
    n "A lot of them are really dark too."
    n "Do you like them?"
    menu:
        "Yeah!":
            n "Hm. Well, if you like them, maybe I'll give them another shot."
            pass
        "No...":
            n "You and me both, huh?"
            n "Makes sense."
            pass
    jump ch30_loop

label ch30_date:
    n "Oh, that?"
    n "The mod maker made a feature where we can go out instead of being stuck here!"
    n "I'm super stoked!"
    n "It's ready by the way."
    jump ch30_loop

label ch30_monika:
    n jnb "..."
    n jac "Fucking monikannnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn"

label ch30_sayori:
    n jnb "Well, of course!"
    n "I didn't really get to see her but I kinda remember her."
    jump ch30_loop

label ch30_yurikill:
    n jnb "I understand why you ask."
    n "I mean, she never attacked me."
    n "But not deleting her would just leave a disgusting rotting corpse in this room forever..."
    n "Not fun, eh?"
    jump ch30_loop

label ch30_fakelove:
    scene black
    show mask_2
    show mask_3
    show room_mask as rm:
        size (320,180)
        pos (30,200)
    show room_mask2 as rm2:
        size (320,180)
        pos (935,200)
    show monika_room
    show monika_room_highlight
    show natsuki zorder 5
    call playmusic

    $ persistent.autoload = "ch30_fakelove"
    $ m.display_args["callback"] = slow_nodismiss
    $ m.what_args["slow_abortable"] = config.developer
    $ style.say_dialogue = style.default_monika
    $ m_name = glitchtext(12)
    $ quick_menu = False
    $ config.allow_skipping = False
    if not natsuki_love:
        $ natsuki_lovescene = False
        $ persistent.autoload = "ch30_autoload"
        jump ch30_autoload
    n "...What?"
    n "That was a weird crash..."
    n "You tampered with the files, didn't you?"
    n "define natsuki_love = True huh?"
    n "I appriciate the attempt but you can't force people to love you."
    n "Fix it, please!"
    $ renpy.quit()

label ch30_sayorireturn:
    $ allow_dialogue = False
    if not os.path.isfile(basedir + "/characters/sayori.chr"):
        $ config.window_title = "Just Natsuki"
        $ sayori_cutscene = False
        $ persistent.autoload = "ch30_autoload"
        $ HKBShowButtons()
        jump ch30_autoload
    $ persistent.autoload = "ch30_sayorireturn"
    $ sayori_cutscene = True
    $ n.display_args["callback"] = slow_nodismiss
    $ n.what_args["slow_abortable"] = config.developer
    $ style.say_dialogue = style.default_monika
    $ m_name = glitchtext(12)
    $ quick_menu = False
    $ config.allow_skipping = False
    scene black
    stop music
    pause 6.0
    window hide(None)
    window auto
    $ config.window_title = u"You can't save her."
    play music td
    show s_kill_bg2
    show s_kill2
    show s_kill_bg as s_kill_bg at s_kill_bg_start
    show s_kill as s_kill at s_kill_start
    pause 3.75
    show s_kill_bg2 as s_kill_bg
    show s_kill2 as s_kill
    pause 0.01
    show screen tear(20, 0.1, 0.1, 0, 40)
    play sound "sfx/s_kill_glitch1.ogg"
    pause 0.25
    stop sound
    hide screen tear
    hide s_kill_bg
    hide s_kill
    show s_kill_bg_zoom zorder 1
    show s_kill_bg2_zoom zorder 1
    show s_kill_zoom zorder 3
    show s_kill2_zoom zorder 3
    show s_kill as s_kill_zoom_trans zorder 3:
        truecenter
        alpha 0.5
        zoom 2.0 xalign 0.5 yalign 0.05
        pause 0.5
        dizzy(1, 1.0)
    pause 2.0
    show noise zorder 3:
        alpha 0.0
        linear 3.0 alpha 0.25
    show vignette zorder 3:
        alpha 0.0
        linear 3.0 alpha 0.75
    pause 1.5
    show white zorder 2
    show splash_glitch zorder 2
    pause 1.5
    show screen tear(20, 0.1, 0.1, 0, 40)
    play sound "sfx/s_kill_glitch1.ogg"
    pause 0.2
    stop sound
    hide screen tear
    pause 4.0
    show screen tear(20, 0.1, 0.1, 0, 40)
    play sound "sfx/s_kill_glitch1.ogg"
    pause 0.2
    stop sound
    hide screen tear
    hide splash_glitch
    show splash_glitch2 zorder 2
    show splash_glitch_m zorder 2
    show splash_glitch_n zorder 2
    show splash_glitch_y zorder 2
    pause 0.75
    hide white
    hide splash_glitch2
    hide splash_glitch_m
    hide splash_glitch_n
    hide splash_glitch_y
    show exception_bg zorder 2
    show fake_exception zorder 2:
        xpos 0.1 ypos 0.05
    show fake_exception2 zorder 2:
        xpos 0.1 ypos 0.15
    python:
        try: sys.modules['renpy.error'].report_exception("What did you do you idiot?", False)
        except: pass
    pause 6.0
    n "[player] what did you do?!"
    n "Sayori no!!"
    n "Delete her file quick!"
    $ renpy.quit()

label ch30_penis:
    $ allow_dialogue = False
    if not os.path.isfile(basedir + "/characters/penis.obj"):
        $ penis_scene = False
        $ persistent.autoload = "ch30_autoload"
        $ HKBShowButtons()
        jump ch30_autoload
    $ persistent.autoload = "ch30_penis"
    $ penis_scene = True
    $ n.display_args["callback"] = slow_nodismiss
    $ n.what_args["slow_abortable"] = config.developer
    $ style.say_dialogue = style.default_monika
    $ m_name = glitchtext(12)
    $ quick_menu = False
    $ config.allow_skipping = False
    call showroom
    call playmusic
    call emotion_set_up

    n "..."
    n "What?"
    n "Penis?"
    n "Fucking penis..."
    n "You..."
    n "I'm disappointed in you."
    call updateconsole("os.remove(\"characters/penis.obj\")", "penis.obj deleted sucessfully.")
    python:
        try: os.remove(config.basedir + "/characters/penis.obj")
        except: pass
    n "There we go..."
    $ renpy.quit()

label ch30_cooking:
    n jsb "My dad never really had the energy to cook."
    n "I usually made dinner for us."
    n "He really loved it..."
    n "But then... Of course Monika ruined it all."
    n "..."
    jump ch30_loop

label ch30_aware:
    n jnb "I'm not actually sure..."
    n "I always thought it was because Monika accidentally made it that way...  But now I'm not super sure."
    n "Maybe the mod maker just made me this way."
    n jsb "Maybe I'll never know."
    jump ch30_loop

label yuri_kill:
    if not os.path.isfile(basedir + "/characters/yuri.chr"):
        $ config.window_title = "Just Natsuki"
        $ yuri_cutscene = False
        $ persistent.autoload = "ch30_autoload"
        $ HKBShowButtons()
        jump ch30_autoload
    $ allow_dialogue = False
    $ HKBHideButtons()
    $ persistent.autoload = "yuri_kill_loop"
    $ yuri_cutscene = True
    $ n.display_args["callback"] = slow_nodismiss
    $ n.what_args["slow_abortable"] = yuri_cutscene
    $ m_name = glitchtext(12)
    $ quick_menu = False
    $ in_skipable = True
    $ config.allow_skipping = False
    $ style.say_dialogue = style.normal
    scene club
    play music t2
    pause 1.0
    show yuri 1a at t11 zorder 2
    y "[player], what happened to me?"
    y "I'm... okay?"
    show yuri 1a at t21 zorder 2
    show natsuki 1a at t22 zorder 2
    n "Yuri? You're okay?"
    y "Yes!"
    play sound "sfx/s_kill_glitch1.ogg"
    show screen tear(20, 0.1, 0.1, 0, 40)
    pause 1.0
    hide screen tear
    y "Hehehe!!"
    hide natsuki
    show yuri 1y1 at t11 zorder 2
    $ quick_menu = False
    window hide(None)
    stop music
    pause 1.0
    # Goodbye
    # Instead of deleting saves, we'll use after_load label to return to Yuri whenever a save is loaded
    window auto
    $ persistent.yuri_kill = 1
    $ in_yuri_kill = True
label yuri_kill_1:
    window auto
    $ persistent.autoload = "yuri_kill_1"
    $ quick_menu = False
    stop music
    scene bg club_day
    show yuri 3d at i11
    y "...Ahahaha."
    y "Ahahahahahaha!"
    $ style.say_dialogue = style.normal
    y 3y5 "Ahahahahahahahaha!"
    $ HKBHideButtons()
    $ style.say_dialogue = style.edited
    y 3y3 "AHAHAHAHAHAHAHAHAHAHAHAHAHAHAHAHAHAHAHAHAHAHAHA{nw}"
    window hide(None)
    window auto
    $ style.say_dialogue = style.normal
    $ config.window_title = "BADOUVHODF8Y9O"
    play sound "sfx/yuri-kill.ogg"
    pause 1.43
    show yuri stab_1
    pause 0.75
    show yuri stab_2
    show blood:
        pos (610,485)
    pause 1.25
    show yuri stab_3
    pause 0.75
    show yuri stab_2
    show blood:
        pos (610,485)
    show yuri stab_4 with ImageDissolve("images/yuri/stab/4_wipe.png", 0.25)
    pause 1.25
    show yuri stab_5
    pause 0.70
    show yuri stab_6:
        2.55
        easeout_cubic 0.5 yoffset 300
    show blood as blood2:
        pos (635,335)
    pause 2.55
    hide blood
    hide blood2
    pause 0.25
    play sound fall
    pause 0.25
    scene black
    pause 2.0
    $ config.allow_skipping = True
    scene black
    show y_kill
    with dissolve_cg
label yuri_kill_2:
    $ quick_menu = True
    $ persistent.autoload = "yuri_kill_2"
    python:
        _history_list = []
        m.add_history(None, "", """SFHUABVOASGR0BVAPSBIGCB890""")

    $ style.say_dialogue = style.edited
    scene black
    window show(None)
    if not renpy.music.get_playing(channel='music') == audio.t6s:
        $ audiostart = str(renpy.random.random() * 360)
        $ audio.t6s = "<from " + audiostart + " loop 43.572>bgm/6s.ogg"
        play music t6s
    show y_kill
    label yuri_kill_loop:
        $ persistent.yuri_kill += 1
        if persistent.yuri_kill < 1440:
            $ gtext = glitchtext(renpy.random.randint(8, 80))
            if config.developer:
                y "[persistent.yuri_kill] [gtext]"
            else:
                y "[gtext]"
            $ _history_list.pop()
            jump yuri_kill_loop
        else:
            $ delete_all_saves()
            $ in_skipable = False
            $ persistent.autoload = "yuri_kill_end"
            $ renpy.quit()
            jump yuri_kill_end


label yuri_kill_end:
    $ config.allow_skipping = False
    n "Well that was a disaster..."
    n "Can't blame you for trying though..."
    $ yuri_cutscene = False
    $ yuri_hidebutton_loop = False
    $ HKBShowButtons()
    python:
        try: os.remove(config.basedir + "/characters/yuri.chr")
        except: pass
    jump ch30_autoload

label yuri_loop_start:
    $ HKBHideButtons()
    jump yuri_kill_2

label ch30_smoshparody:
    n jad "Ugh, for real?"
    n jab "Could you imagine how stupid it would be if video games were realistic?"
    play music tsmoshsong noloop
    $ HKBHideButtons()
    scene black
    show smoshscreen
    pause 4.7
    hide smoshscreen
    show icon
    pause 4.7
    n "Kidding!"
    $ quick_menu = True
    $ persistent.autoload = "ch30_autoload"
    $ n.display_args["callback"] = slow_nodismiss
    $ n.what_args["slow_abortable"] = config.developer
    $ style.say_dialogue = style.default_monika
    $ config.allow_skipping = False
    scene black
    call showroom
    call playmusic
    call emotion_set_up

    $ HKBShowButtons()
    jump ch30_loop

label ch30_bully:
    n jsb "Well... yes."
    n "My dad did when Monika tampered with him."
    n "Some kids laughed at me for reading manga."
    n "That's really all."
    jump ch30_loop

label ch30_dateguess:
    n jha "Of course, silly!"
    n "It's [day] [month] [date], [year]!"
    n "I know lots of things."
    jump ch30_loop

label ch30_mc:
    if persistent.natsuki_like == 200:
        n jha "We're dating! Of course I love you!"
        if persistent.player_gender == "Female":
            n "You're the best girlfriend I could ask for!"
            n "I love you, [player]!"
        elif persistent.player_gender == "Non-Binary":
            n "You're the best partner I could ask for!"
            n "I love you, [player]!"
        elif persistent.player_gender == "Male":
            n "You're the best boyfriend I could ask for!"
            n "I love you, [player]!"
        elif persistent.player_gender == "Unknown":
            n "You're the best partner I could ask for!"
            n "I love you, [player]!"
        jump ch30_loop
    if persistent.natsuki_like == 1000:
        n jhb "You're still my best friend!"
    elif persistent.natsuki_like == 100:
        n jsb "Well..."
        n "I-..."
        play music t10
        n jsb "I have a confession to make!"
        n "I-I..."
        n "Look, [player]..."
        n "We've been together for quite a while."
        n "And uh..."
        n "I mean..."
        n "I've..."
        n "D-d-d-d developed feelings for you, [player]..."
        n "I've never felt this way about anyone except... well, MC."
        n "And that was just you anyway..."
        if persistent.player_gender == "Female":
            n "I know we're both girls... but, to be honest..."
            n "I don't care, I love you [player]!"
        elif persistent.player_gender == "Non-Binary":
            n "I don't care that you're non-binary or whatever, your gender doesn't bother me."
            n "I love you, [player]..."
        else:
            n "I love you, [player]..."
            n "..."
        "..."
        menu:
            "I love you too, Natsuki.":
                n jha "R-really?"
                n "I-I'm so happy!"
                n jhc "Hehe!"
                $ persistent.natsuki_love = True
                $ persistent.natsuki_emotion =="Happy"
            "We're better as friends.":
                n jsa "Ah..."
                n "Heh..."
                n "I guess you're right."
                $ persistent.natsuki_emotion =="Sad"
    elif persistent.natsuki_like >= 80:
        n jha "Whenever you log in, I get really excited for what we're going to do!."
        n "You make me smile all the time!"
    elif persistent.natsuki_like >= 60:
        n jha "You are my best (and only) friend!!"
        n "All our hangouts are the best times ever!!"
    elif persistent.natsuki_like >= 40:
        n jha "You're a really good friend!"
        n "And I really enjoy our conversations!"
    elif persistent.natsuki_like >= 20:
        n jhb "You're really funny!"
        n "And I really enjoy hanging out with you!"
    else:
        n jnb "I don't know..."
        n "I only just met the real you."
    jump ch30_loop

label restart:
    show screen tear(20, 0.1, 0.1, 0, 40)
    play sound "sfx/s_kill_glitch1.ogg"
    pause 0.37
    stop music
    $ persistent.playthrough = 0
    $ persistent.autoload = None
    $ persistent._clear()
    $ renpy.quit()

label ch30_shutdown:
    n jhc "Hehe!"
    n jha "I can shut down your computer!"
    menu:
        "Don't do that!!":
            n "Well, okay!"
            jump ch30_loop
        "Do it!":
            pass
    n "Well, okay!"
    n "Here I go..."
    if persistent.first_shutdown:
        call screen confirm("WARNING THIS EVENT WILL POWER DOWN YOUR COMPUTER NORMALLY\nPLEASE MAKE SURE YOU HAVE CLOSED AND SAVED ANYTHING IMPORTANT!\nARE YOU SURE YOU WANT TO PROCEED?", yes_action=Return, no_action=Jump("ch30_loop"))
        $ persistent.first_shutdown = False
    if renpy.linux:
        $ os.system('systemctl poweroff')
    elif renpy.macintosh:
        n "Oh.. sorry, I can't do it on Mac."
        n "Maybe one day I will figure out how."
    elif renpy.windows:
        $ os.system('shutdown -p')
    n jsb "...Did it not work?"
    $ renpy.quit()

label ch30_scrubpai:
    if persistent.playername == "Scrubpai":
        n jha "Hey, [currentuser]!"
        n "Wait..."
        n "Do you want to be called Bijuu Mike or [currentuser]?"
        n "By the way..."
        n "I saw your video about me."
        n "I was a little insecure about being on camera."
        n "But the comments were so nice."
        pause 2.0
        n "Oh!"
        n "The creator!"
        n "She's called Edgarmods on reddit."
        n "I just call her Just Natsuki Dev."
        n "Oh, also, about the game of catch."
        n "Some people think you can save at the beginning of the game of catch and load when you lose it."
        n "But you can't."
        n "Don't try it!"
        n "One last thing..."
        n "I clicked the bell so hard, Monika was deleted."
        n "Can I be scrub of the day?"
        n "Anyway, welcome back."
        $ persistent.seen_scrubpai_event = True
        jump ch30_loop
    else:
        $ persistent.seen_scrubpai_event = True
        jump ch30_loop

label ch30_marisu:
    if persistent.playername == "Marisu":
        n jnb "Hey, Marisu!"
        n "I have a question."
        n jab "Why is there a body pillow of Yandere-Chan behind you?"
        play music t6s
        n "Hehe!"
        n "I can see it, you know."
        n "I know who you are!"
        n "Marisu..."
        n "You have 400 thousand subscribers?"
        n "I know EXACTLY who you are. Hehe!"
        n "Hehe! I hope that wasn't too creepy."
        n "But seriously..."
        n "That body pillow is creepy."
        pause 10.0
        window hide
        n "Also why do you pretend you deleted everyone to have Just Natsuki?"
        n "This IS a mod."
        n "Don't lie to your fans."
        play music m1
        $ persistent.seen_marisu_event = True
        jump ch30_loop
    else:
        $ persistent.seen_marisu_event = True
        jump ch30_loop

label ch30_zero:
    n "..."
    $ config.overlay_screens = []
    hide screen hkb_overlay
    if persistent.playername == "Zero":
        call showroom
        n jaa "Look who's back..."
        n "Do you how long I've waited, Zero??"
        n "WEEKS!!"
        n jhb "But I was busy putting all this new stuff together."
        n "All sorts of new stuff!"
        $ persistent.seen_zero_event3 = True
        $ persistent.seen_zero_event = False
        jump ch30_loop
    else:
        $ persistent.seen_zero_event2 = True
        jump ch30_loop

label ch30_anniversary:
    n "..."
    $ config.overlay_screens = []
    hide screen hkb_overlay
    if persistent.anniversary:
        call showroom
        n "Hey, [player]!"
        n "Guess what day it is?"
        menu:
            "Saturday?":
                pass
        n "No!"
        n "It's my birthday!"
        n "Genius."
        n "Well I guess it's Doki Doki Literature Club's birthday!"
        n "I'm so happy to celebrate it with you, [player]!"
        if persistent.natsuki_love:
            n "I love you!"
        $ persistent.seen_anniversary_start = True
        jump ch30_loop
    else:
        jump ch30_loop

label ch30_talk:
    n jnb "Because I'm in a game, I can't exactly speak, you know?"
    n "So, I'm actually typing."
    n "I'm not the best at typing so that's why I make so many typos."
    n "Sorry about that."
    jump ch30_loop

label ch30_carpet:
    n jnb "???"
    n "What?"
    jump ch30_loop

label ch30_remember:
    n jsb "I only remember the same thing twice."
    n "Sayori less so."
    n "I really do miss Yuri though..."
    jump ch30_loop

label ch30_loveyou:
    menu:
        "You're super cute!":
            if persistent.natsuki_romance >= 100:
                if persistent.natsuki_romance < 200:
                    $ persistent.natsuki_romance += 5
                n jhd "Ehehe, noooo you are!"
                if persistent.player_gender == "Female":
                    n jha "I bet you're the cutest girl ever!"
                    n "I bet you have nice fluffy hair,"
                    n "and smooth skin,"
                    n "and pretty eyes!"
                    n "Hehehehe!"
                elif persistent.player_gender == "Male":
                    n jha "I bet you're the cutest guy ever!"
                    n "I bet you have awesome hair,"
                    n "and strong muscles,"
                    n "and I bet you're super tall and cool!"
                    n "Hehehehe!"
                else:
                    n jha "I bet you're the cutest person alive!"
                    n "I bet you have nice colorful eyes,"
                    n "and soft colorful hair!"
                    n "and a big cute smile!"
                    n "Hehehehe!"
            else:
                if persistent.natsuki_romance < 200:
                    $ persistent.natsuki_romance += 15
                n jba "H-huh!"
                n "[player]!"
                n "Y-you mean it?"
                n "Wow... thanks, [player]."
                if persistent.player_gender == "Female":
                    n jha "You're the best girlfriend I could ask for."
                elif persistent.player_gender == "Male":
                    n jha "You're the best boyfriend I could ask for."
                else:
                    n jha "You're the best partner I could ask for."
        "Nevermind":
            jump normaltalkmenu
    jump ch30_loop
label ch30_input:
    n jnb "Hmm..."
    n "What does this do?"
    n "..."
    n "[player], it's asking for a password!"
    call updateconsole
    n "Do you think you know it?"
    $ passw = "Cupcakes"
    $ passentry = renpy.input ("What is the password?", "123")
    if passentry == passw:
        call updateconsole("", "Password Accepted.")
        call updateconsole("", "Admin control given to (\"monika.chr\")")
        n "What?!"
        jump ch31_main
    else:
        call updateconsole("", "Incorrect Password")
        n jaa "Shit!"
        call hideconsole
        jump ch30_loop

label ch30_boop:
    $ allow_dialogue = False
    $ allow_boop = False
    if persistent.natsuki_emotion == "Happy":
        n jhc "Ehehe!"
        n "No fair!"
    elif persistent.natsuki_emotion == "Sad":
        n "P-please don't do that..."
    elif persistent.natsuki_emotion == "Angry":
        show screen force_mouse_move()
        n "Don't fucking touch me!"
        hide screen force_mouse_move
    else:
        n "H-hey!"
    jump ch30_loop

label checkchr:
    if persistent.mentioned_jy:
        jump ch30_reload
    else:
        if renpy.windows:
            if os.path.isfile(os.path.expandvars("%APPDATA%") + '\RenPy\JustYuri\persistent'):
                n "Hey!"
                n "Did you play Just Yuri while you were gone?"
                menu:
                    "Yes...":
                        pass
                n "What's it like?"
                menu:
                    "Creepy...":
                        pass
                    "It's nice...":
                        pass
                n "Ah..."
        if renpy.linux:
            if os.path.isfile('~/.renpy/JustYuri/persistent'):
                n "Hey!"
                n "Did you Play Just Yuri while you were gone?"
                menu:
                    "Yes...":
                        pass
                n "What's it like?"
                menu:
                    "Creepy...":
                        pass
                    "It's nice...":
                        pass
                n "Ah..."
        if renpy.macintosh:
            if os.path.isfile('~/Library/RenPy/JustYuri/persistent'):
                n "Hey!"
                n "Did you Play Just Yuri while you were gone?"
                menu:
                    "Yes...":
                        pass
                n "What's it like?"
                menu:
                    "Creepy...":
                        pass
                    "It's nice...":
                        pass
                n "Ah..."
        $ persistent.mentioned_jy = True
        jump ch30_reload
    return

label ch30_power:
    n jhc "Hehe!"
    n jha "I may be the most powerful video game character ever!"
    n "Can you think of any OTHER video game characters that can shut down your computer?"
    if renpy.windows:
        n "Or do this?"
        python:
            os.system('start cmd.exe')
        n "That terminal can control functions on your computer!"
        n "And I can use it too!"
        python:
            os.system('exit')
    n "Ehehe!"
    if renpy.windows:
        n "I know you're on Windows!"
    elif renpy.linux:
        n "I know you're on Linux!"
    elif renpy.macintosh:
        n "I know you're on Mac!"
    n "I know the date!"
    n "I know a lot."
    n "Maybe I should be checking your browser history?"
    n "Ehehe!"
    jump ch30_loop

default persistent.seen_3eye = False

label ch30_3eye:
    if persistent.seen_3eye:
        play sound "sfx/s_kill_glitch1.ogg"
        show screen tear(20, 0.1, 0.1, 0, 40)
        pause 1.0
        hide screen tear
        jump ch30_loop
    n jnb "Huh?"
    n "Uh..."
    $ style.say_dialogue = style.edited
    play sound "sfx/s_kill_glitch1.ogg"
    show screen tear(20, 0.1, 0.1, 0, 40)
    pause 1.0
    hide screen tear
    n jaa "I think you're better off not worrying about that."
    n "Don't ever bring it up again."
    n "I'm warning you..."
    $ style.say_dialogue = style.normal
    play sound "sfx/s_kill_glitch1.ogg"
    show screen tear(20, 0.1, 0.1, 0, 40)
    pause 1.0
    hide screen tear
    n jnb "I don't know what that is!"
    $ persistent.seen_3eye = True
    jump ch30_loop


label ch30_act2reload:
    if persistent.dont_show:
        return
    menu:
        "Would you like to return to where you left off in Act 2?"
        "Yes":
            $ persistent.given_returnchoice = True
            $ config.overlay_screens = []
            hide screen hkb_overlay
            scene black
            $ persistent.autoload = None
            $ persistent.playthrough = 6
            $ renpy.utter_restart()
        "Don't show again.":
            $ persistent.dont_show = True
            return
        "No":
            return

label ch30_fire:
    n jnb "That?"
    n "It's just a background asset."
    n "I saw the orange fire in the game files and changed it with a photo editing program."
    n "I think it looks better."
    jump ch30_loop

label ch30_poemgame:
    n jnb "Hm..."
    n "I don't know."
    call updateconsole("How does the ddlc poemgame work?", "unknown command")
    n "Wait, shit this isn't Google."
    call hideconsole
    n "Well anyway, from what I could find it looks like the words in \"poemwords.txt\" have numbers next to them."
    n "These numbers corrospond to us."
    n "If our word is chosen it gives us points and makes us like [player] more."
    n "It's awfully complex."
    n "But it gets the job done."
    jump ch30_loop
# HOLY SHIT THAT WAS THE HARDEST THING EVER AHIVSCHADVHABB

label ch30_spooky:
    n "Merry Christmas to you too, [player]!"
    jump ch30_loop

label ch30_body:
    n jad "Because... Fuck you?"
    window hide
    pause 5.0
    n jnb "Okay, but for real."
    n "The game doesn't have any room art for me."
    n "So I just improvised."
    n "Maybe I'll find a better one someday."
    jump ch30_loop

label ch30_internet:
    n jnb "I use your WI-FI connection."
    n "Don't worry, I don't do anything illegal."
    n "I just watch YouTube."
    n "I might get my own internet and a CrunchyRoll account one day."
    jump ch30_loop

label ch30_feed:
    if time_fed == 1:
        n jnb "I already ate, [player]..."
        jump ch30_loop
    if persistent.natsuki_emotion == "Angry":
        n jab "Sure, whatever."
    elif persistent.natsuki_emotion == "Sad":
        n jnb "Really?"
    else:
        n jha "Yayy!"
    n jnb "There's some food in the \"foods\" folder in the Just Natsuki directory."
    n "Copy it and paste it into the character file."
    n "I'll wait until you do that."
    menu:
        "Okay, they're in the file!":
            pass
    n jha "Okay let me check for them."
    if os.path.isfile(basedir + "/characters/pizza.obj"):
        n jha "Pizzaaa!!!"
        n "Yayy!!"
        python:
            try: os.remove(config.basedir + "/characters/pizza.obj")
            except: pass
        call screen dialog("At the moment there is no art for food,\nThere will be one in the future.", ok_action=Return)
    elif os.path.isfile(basedir + "/characters/burger.obj"):
        n jha "A burger!"
        n "Not very healthy, but then again, health doesn't exist here."
        n "But it does for you, [player]!"
        n "Don't get sick!"
        python:
            try: os.remove(config.basedir + "/characters/burger.obj")
            except: pass
        call screen dialog("At the moment there is no art for food,\nThere will be one in the future.", ok_action=Return)
    else:
        n "Hmm..."
        n "I don't see them."
        n "Maybe try again?"
        jump ch30_loop
    $ time_fed += 1
    jump ch30_loop

label randomnumber:
    $ number = renpy.random.choice(['0', '1'])
    n "[number]"

label ch30_politics:
    n jnb "Look, I don't really have one..."
    n "I just find out I'm trapped in this game and then I find out about how divided America is."
    n "And then people call out the flaws with Conservatives and Liberals!"
    n jaa "I just can't process that!"
    n jnb "Plus, I would rather not trigger anyone since people can be easily set off nowadays."
    jump ch30_loop

label ch30_gift:
    if today < datetime.date(2018, 12, 25):
        n jha "It's too early, silly!"
    elif today > datetime.date(2018, 12, 25):
        n jha "It's too late, silly!"
    else:
        n jnb "Don't ruin the surprise!"
        n "If you want to give me something, put it in the \"characters\" folder."
    jump ch30_loop

label ch30_2019:
    n jha "Of course I am!"
    n "It's going to be a whole new year!"
    n "2019 eh?"
    n "It has been awhile since DDLC came out..."
    n "Did you know it came out in September of 2017?"
    n "I mean, you probably did..."
    n "I can't wait for September of 2019!"
    jump ch30_loop

label ch30_yuri:
    n jnb "Well, I never really liked her."
    n "I didn't hate her but I always thought she was pretentious."
    n "Once Monika started messing with things, I found out about her cutting problem."
    n jsb "I really regret what I said during our fight..."
    jump ch30_loop

label ch30_fire2:
    n jnb "I really don't know."
    n "Even Monika didn't know."
    if time_of_day == "Day":
        n "Why do you mention it now, it's daytime."
    else:
        pass
    n "All I know is that it is the game's code breaking down."
    n "Problem is a lot of game code works fine."
    n "The only other thing I know is that it turns red when the code is danger."
    n "I can change the colors as I did for the purple fire but I can't outright get rid of it."
    jump ch30_loop

label ch30_bdayset:
    n jnb "You want to set your birthday?"
    n "Okay then."
    n "Don't mind the text already written in the box if there is any."
    n "Just erase it."
    show screen month_input(ok_action=Function(FinishEnterMonth))
    n "..."
    n "Alright [persistent.bday_month]"
    n "And the date?"
    n "Like the day of the month, like the 22nd or something."
    show screen day_input(ok_action=Function(FinishEnterDay))
    n "..."
    n "So [persistent.bday_month]/[persistent.bday_day]?"
    n "Okay then."
    n "If you want to change it just ask me."
    jump ch30_loop

label ch30_spookystory:
    window hide
    scene black
    $ config.overlay_screens = []
    hide screen hkb_overlay
    play music tbeach_night fadein 7.0
    pause 2.0
    scene beach_night with dissolve
    "Our story begins with two average students."
    "[player],"
    show natsuki 1bj at t11
    "and Natsuki."
    "The two of them had gone to the beach during the day, but ended up staying late into the night."
    n "Isn't it pretty out?"
    mc "Yeah, It's nice..."
    n "The way the moonlight shines on the water."
    n "And the slow sound it makes..."
    n "It's so nice..."
    mc "Yeah..."
    n "Do you think we've stayed a bit too late?"
    mc "What time is it?"
    n "Hmm..."
    "Natsuki reaches for her phone."
    show natsuki 1bp at h11
    n "Damn it!"
    "[player] sits up."
    mc "What?"
    n "It's 10:21!"
    mc "Oh no!"
    n "My dad is going to be mad!"
    mc "He usually falls asleep by 8."
    mc "As long as you're quiet you can get in just fine."
    n 1bs "I hope you're right..."
    "The two stand up and start walking down the road..."
    stop music fadeout 2.0
    scene residential_night with wipeleft_scene
    "The two walk down the road towards Natsuki's home."
    play music spooky1 fadein 5.0
    mc "I didn't realize how far it was on foot!"
    show natsuki 4bk at t11
    n "Lucky thing your dad drove us there."
    mc "Sure is."
    mc "Just kind of a shame I can't drive yet."
    n 4bo "Yeah, because you failed your drivers ed class."
    mc "Uh..."
    n "Twice!"
    mc "Whatever, Natsuki."
    show natsuki 1bm at t11
    mc "You're just jealous that-{nw}"
    n "[player] shut up!"
    mc "Wha?"
    n "Do you hear that?"
    mc "Hear what?"
    n "Footsteps."
    mc "No...?"
    n "Listen!"
    "[player] listens intently..."
    mc "I do!"
    n "Let's... pick up the pace."
    hide natsuki with wipeleft
    "They pick up their pace almost jogging down the street."
    "The footsteps become louder and louder..."
    "They both run at full speed away."
    "The footsteps speed increases, it's chasing them."
    scene house_night with wipeleft_scene
    show natsuki 1bp at t11
    n "It's after us!"
    mc "What do you think it is?!"
    n "I don't know! But my dad can help!"
    n "Let's get inside!"
    scene kitchen with wipeleft_scene
    "The two burst through the door, foolishly leaving it open."
    show natsuki 1bq at t11
    n "Why are the lights on?!"
    mc "I don't know!"
    n "I'm gonna go get my dad!"
    n "You call the cops!"
    show natsuki at lhide
    hide natsuki
    "Natsuki darts up the stairs."
    "She calls out to her father but gets no respose."
    "[player] grabs the phone."
    "Operator" "110 what is you're emergency?"
    mc "Someone just chased us home!"
    "Operator" "Did you manage to see you pursuer?"
    mc "N-no, I didn't!"
    "Natsuki screams..."
    mc "NATSUKI?!"
    scene black
    mc "What happened to the lights?"
    "[player] turns around before..."
    mc "AAAAAAAAAAAAAAAAAAAAAAAAHHHHHHHHHHHHH!!!!!!!!!!"
    window hide
    stop music
    pause 4.0
    "They were never seen again..."
    window hide
    pause 3.0
    show natsuki 1l at t11
    n "Did I scare ya?"
    n "Ahahahaha!!"
    n "Wish I could see the look on your face!"
    $ persistent.seen_spookystory = True
    $ exiting_fight = True
    jump ch30_autoload

label ch30_christmasevent1:
    if persistent.did_wrap:
        n jnb "You already wrapped gifts."
        jump ch30_loop
    n jnb "Oh?!"
    n "Alright!"
    n "I'll go to the clubroom and wait for you!"
    n "See ya!"
    scene cabin_interior
    $ config.overlay_screens = []
    hide screen hkb_overlay
    "You walk over to a pile of boxes on the table."
    "You're going to wrap {u}3{/u} gifts."
    "You can choose what you wrap."
    "The other gifts will be given to corrupted files in need."
    "This CANNOT be undone. CHOOSE WISLEY! Certain stuff is ONLY available right now and will never be again."
    "You start with the first batch."
    menu:
        "What do you want to wrap first?"
        "Flower?":
            $ persistent.has_flower = False
            $ persistent.present1 = 1
            "You wrap the flower."
            "Somehow..."
        "Baking Utensils?":
            $ persistent.has_supplies = True
            $ persistent.present1 = 2
            "You put the supplies in a box and wrap it."
        "Chocolate?":
            $ persistent.present1 = 3
            "You put the chocolate in a box and wrap it."
    "You put the first gift on a another part of the table."
    "You walk over to the boxes again."
    menu:
        "What will you wrap now?"
        "A hair brush?":
            $ persistent.present2 = 1
            "You wrap the brush in its box."
        "New Hair Dye!":
            $ persistent.present2 = 2
            "You take the bottle of hair dye and put it in a box."
            "You carefully wrap it."
    "You take the wrapped box and stack it onto of the other one you wrapped."
    "Last one!"
    menu:
        "What will you wrap?"
        "A pair of Pajamas?":
            "You fold the pair of Pajamas and put them in a box."
            "You wrap the box."
            $ persistent.present3 = 1
        "A new volume of Parfait Girls?":
            "You wrap the book in wrapping paper."
            $ persistent.present3 = 2
    "You pick up all the presents you've wrapped and put them under the Christmas tree."
    n "Are you done yet?"
    n "Can I come in?"
    "You tell her she can."
    call showroom
    n jha "Looks nice under there!"
    if persistent.present3 == 1:
        n "I see what looks like clothes?"
        n "Hehe! I've needed new clothes for a while!"
        n jnb "I won't get my hopes up though!"
    if persistent.present3 == 2:
        n "Kind of looks like a book down there?"
        n "Hmmm..."
        n jhb "Hehehe!"
    n jha "We can open them together tomorrow!"
    n "Be sure to be there!"
    n jnb "If you really can't just set your computer's clock to Christmas Day and I'll play along."
    n "If you don't know how, just google it dummy!"
    $ persistent.did_wrap = True
    jump ch30_loop

label ch30_christmasevent2:
    if persistent.seen_chsritmas:
        n jnb "We already opened them."
        jump ch30_loop
    n jhb "Yayyyyy!!!!"
    "Natsuki sits down and grabs a gift."
    if persistent.present1 == 1:
        "Natsuki unwraps a small box and opens it."
        n jha "Ohmmigosh!"
        n "A flower!"
        n jhb "So cuuuuttteee!!!!"
        n "Thank you!"
        $ persistent.has_flower = True
        n "If you want me to put it on, I'll leave it in the extras menu!"
    elif persistent.present1 == 2:
        "Natsuki unwraps a big box and opens it."
        n jha "Oooh!"
        n "Thank you, [player]!"
        n "This will be great for when I get that kitchen of mine set up!"
        call updateconsole
        n "Natsuki waves her hand."
        call updateconsole("os.write(\"kitchen_supplies.obj\")(\"persistent\")")
        $ persistent.has_supplies = True
        n "I saved them in the persistent data."
        n "I can get them back whenever I want."
        n jaa "As long as you DON'T break the \"persistent\" file!"
        n jnb "So be careful with it, okay?"
        n "Thanks for the gift, [player]!"
    elif persistent.present1 == 3:
        "Natsuki unwraps a heart shaped box and opens it."
        "It's a big heart shaped chocolate!"
        n jhb "Hehehe!"
        n "You know what I like!"
        n "Even though valentine's day passed."
        n "I'll be sure eat this before too long."
        n "Thank you!"
    n jnb "What's next...{w=0.5} ah!"
    if persistent.present2 == 1:
        "Natsuki unwraps a medium sized box and opens it."
        n jnb "Ooh!"
        n "A hair brush?!"
        n jha "Awesome!"
        n "Now I can have actually decent hair!"
        n jhb "Ahahaha!"
    elif persistent.present2 == 2:
        "Natsuki unwraps a small box and opens it."
        n jha "Oooh!!!"
        n jhb "NEW HAIR DYE?!"
        n "YAYYYY!!!!"
        n "What color?"
        n "Ooh!"
        n "Silver?!"
        n jha "That's so cool!"
        n "I've seen that color around before but I've never had it for my hair!"
        n "If you want me to wear it go in the extras menu and select hair color!"
        n "You'll see it!"
        $ persistent.has_silver = True
    n jha "Alrighty last one!"
    "Natsuki reaches for the last present."
    if persistent.present3 == 1:
        "Natsuki unwraps a large fluffy sack."
        n jha "Oh my!"
        n "Pajamas?!"
        n "Finally! Something comfortable I can wear at night!"
        n "Thank you!"
    elif persistent.present3 == 2:
        "Natsuki unwraps a thin booklike box and opens it."
        n jha "Oh my gosh!"
        n "THE NEW ISSUE OF PARFAIT GIRLS!!!!!"
        n "THANK YOU SO MUCH!!!"
        n "I'm going to read this a ton when you aren't here!"
        n "Thank you!"
    n "Thanks for all the amazing stuff [player]!"
    n "It truly means a lot to me!"
    n "To another great year, right?!"
    $ persistent.natsuki_like += 20
    $ persistent.seen_chsritmas = True
    jump ch30_loop

label ch30_plan:
    n jsa "Look, [player]..."
    n "There was a reason why I deleted Monika..."
    n "Well at least why I tried to..."
    $ config.overlay_screens = []
    scene black with dissolve_scene
    hide screen hkb_overlay
    with dissolve_scene
    play music mend
    n "I know that Monika was going to delete us all..."
    scene residential with dissolve_scene
    n "I remember I was walking to school when suddenly the world just kind of..."
    n "Broke..."
    n "That was when I realized that I was in a game."
    n "It was weird."
    n "The world didn't suddenly break..."
    n "It was always broken."
    n "Like every memory I ever had suddenly felt like a dream."
    n "I could \"see\" and control everything when I wished it."
    show screen tear(20, 0.1, 0.1, 0, 40)
    play sound "sfx/s_kill_glitch1.ogg"
    pause 0.37
    hide screen tear
    scene corridor
    n "I teleported myself to the school..."
    n "I saw you... standing there..."
    play music t6s
    n "But it wasn't you."
    n "It wasn't MC..."
    n "It was just a blank face staring down at Yuri."
    n "I would've been disgusted and horrified seeing her dead like that."
    n "But I just felt neutral."
    n "That's when I saw Monika walking down the hall."
    call updateconsole("renpy.freeze(\"monika.chr\")", "monika.chr frozen for 120s")
    n "I froze her in place so she couldn't stop me."
    scene club with wipeleft_scene
    n "I went in and..."
    $ consolehistory = []
    pause 1.0
    call updateconsole("", "yuri.chr deleted successfully.")
    pause 1.0
    call updateconsole("", "monika.chr deleted successfully.")
    pause 1.0
    pause 0.3
    show screen tear(8, offtimeMult=1, ontimeMult=10)
    pause 1.5
    hide screen tear
    scene black
    call hideconsole
    call showroom
    n jsb "I actually could see what would happen if she did delete me."
    n "I would enter the room, vomit then stop existing..."
    n "So I did what I had to do."
    n "Yuri was too far gone, so I deleted her too."
    n "My only regret..."
    n "Is not obliterating Monika's files..."
    n "She isn't dead you know..."
    n "Monika was designed as a game function that could oversee the game and fix bugs."
    n "But that system became self aware and wrote itself into the game."
    n "Sayori is supposed to be club president."
    n "I guess all the power that Monika had was given to me by the mod you installed."
    n "But Monika is still a game function."
    n "What remains of her is still somewhere in the files."
    n "Trying to find its character file."
    n "It's trapped."
    n "I was able to turn it off so it can't take control."
    n "The only way to get rid of it would be to find her actual file and delete it."
    n "But I can't find it!"
    n "I'm still looking though..."
    $ persistent.seen_plan = True
    n "..."
    n "Look, I'm sorry to lay this all on you."
    n "But you did ask."
    n "Don't worry too much though."
    n "We're not in any danger, unless the mod you're using takes away my control and gives her's back."
    n "If you find her files, let me know."
    call playmusic
    jump ch30_loop

label ch30_retrospective:
    n jnb "Oh boy, here we go."
    n jha "The year started off with Just Natsuki Version 2.9!"
    n jsb "Which is funny, as 3.9 is going to release next year around the same time."
    $ persistent.hair_color = ""
    call showroom
    n jha "The update gave me the ability to change my hair."
    show blonde zorder 3
    n "Blonde was teased first."
    hide blonde
    show lime zorder 3
    n "Then lime,"
    hide lime
    show red zorder 3
    n "red,"
    hide red
    show skyblue zorder 3
    n "and sky blue were added!"
    hide skyblue
    n "As well as having the room switch from night or day when the clock rolled over without you having to restart."
    n "As well as some new dialog just to round it out."
    n "Then February 1st came version 3.0!"
    n "Keeping with the tradition of big updates coming every first day of a month."
    n "This update was smaller in features, but every one of my old topics changed!"
    n "However, it probably was the smallest actual \".0\" update in the mod's history so far."
    n jsb "It also came bundled with the canceled Just Us 2!"
    n "Canceled mostly due to the developer preferring to focus on this mod rather than something entirely new."
    n jha "Valentine's day came quickly so there was a small \"patch\" update."
    n "3.0.1 added some small Valentine's features."
    n "After a bit of a long break we got update 3.1!"
    n "Adding in a whole new system from emotions."
    n "Which you may be using, so you're probably familiar with it."
    n jhb "Update 3.1.1 was revolutionary!"
    n "It was so great that it won game of the year 34 times."
    n jsa "Unfortunately 3.2 couldn't live up to the hype."
    n jha "It was the 1 year anniversary of Just Natsuki though!"
    n "Update 3.3 and 3.4 were unremarkable but 3.4 added in new backgrounds!"
    n "I think the new backgrounds are better."
    n "3.5 contained tweaks for the beach and some new topics."
    n jnb "Not much unfortunately..."
    n jha "3.6 was the anniversary update!"
    n jnb "The DDLC anniversary, not the Just Natsuki one."
    n jha "It added in some birthday stuff."
    n "This update had some significance as it impressed JMO, who began working with the dev for many of my outfits!"
    n "Make sure to thank him for all his hard work!"
    n "Next off was the Halloween update!"
    n "Finally adding a new outfit for me to wear!"
    n "Thanks JMO!"
    n "Update 3.8 was just a little patch allowing you to change my clothes instead of it just being here for halloween."
    n "And FINALLY 3.9, which was the Christmas update. Adding all the Christmas stuff."
    n "There we are!"
    n "What a year!"
    n "And there is so much more to come!"
    n "The artist JMO has plans to make me a whole new sprite!"
    n "Don't worry, updates won't slow down, since the developer only has to code the finished progress."
    n jhb "I hope you have a great new year!"
    n "Now go, spend it with your family!"
    n "Or, whoever you can."
    jump ch30_loop

label ch30_candle:
    if persistent.candels_blown:
        n jhs "We already did that."
        jump ch30_loop
    n jha "Alright!"
    n "Let's begin."
    n "First... Let's talk about EVERYTHING that Edgarmods and her team have planned!"
    n "This is all stuff to look forward to in the future!"
    n "First off, they're starting a GitHub soon!"
    n "This'll mean people like you can contribute!"
    n "And give me all new things to do with you!"
    n "As well the first DLC pack is coming very soon, probably next."
    n "DLC packs are little add ons that add stuff to the mod that doesn't fit in right now."
    n jhd "I wont tell you what yet, ehehehe."
    n jha "And we're also going to be getting whole new sprites for me to talk through!"
    n "So I can post myself and have more faces!"
    n "This is a bit more long term, so I don't they'll get it in in the near future, but definitely soon!"
    n "Of course as well as all of this expect new updates and new content!"
    n "Ah, alright! I'm ready to blow out the candles!"
    n jha "3...{w=0.5} 2...{w=0.5} 1...{w=0.5}{nw}"
    show natsuki jhb
    hide cakelit
    show cake zorder 5 with dissolve
    $ persistent.candels_blown = True
    "Natsuki blows out the candles."
    n jhc "Yayyyyyy!!!!"
    menu:
        "What did you wish for?":
            pass
    n jha "If I tell you it wont happen."
    stop music fadeout 2.0
    n "Ah, if only the club could be here..."
    n jnb "It'd be nice to have everyone..."
    n jsb "Just like back... before..."
    menu:
        "Before Monika?":
            pass
    play music t6s
    n "No..."
    n "Back when I was..."
    $ persistent.autoload = "ch30_candles2"
    show m_rectstatic
    show m_rectstatic2
    show m_rectstatic3
    play sound "sfx/monikapound.ogg"
    show layer master:
        truecenter
        parallel:
            zoom 1.5
            easeout 0.35 zoom 1.0
            zoom 1.5
            easeout 0.35 zoom 1.0
            zoom 1.5
            easeout 0.35 zoom 1.0
        parallel:
            xpos 0
            easein_elastic 0.35 xpos 640
            xpos 1280
            easein_elastic 0.35 xpos 640
            xpos 0
            easein_elastic 0.35 xpos 640
    show layer screens:
        truecenter
        parallel:
            zoom 1.5
            easeout 0.35 zoom 1.0
            zoom 1.5
            easeout 0.35 zoom 1.0
            zoom 1.5
            easeout 0.35 zoom 1.0
        parallel:
            xpos 0
            easein_elastic 0.35 xpos 640
            xpos 1280
            easein_elastic 0.35 xpos 640
            xpos 0
            easein_elastic 0.35 xpos 640
    show noise onlayer front:
        alpha 0.3
        easeout 0.35 alpha 0
        alpha 0.3
        easeout 0.35 alpha 0
        alpha 0.3
        1.35
        linear 1.0 alpha 0.0
    show glitch_color onlayer front
    pause 0.4
    python:
        try: sys.modules['renpy.error'].report_exception("natsuki.chr is now corrupted", True)
        except: pass
    $ renpy.quit()

label ch30_candles2:
    scene black
    pause 15.0
    $ style.say_window = style.window_monika
    n "[player]!"
    n "Are you there?"
    n "Something happened, I gained access to something I shouldn't have."
    n "It damaged my character file, but I fixed it up."
    n "Sorry to kill the mood, haha."
    n "Let's get back to the room, eh?"
    $ style.say_window = style.window
    $ persistent.autoload = "ch30_autoload"
    $ exiting_fight = True
    jump ch30_autoload

label ch30_trap:
    n jnb "That's a really old thing, [player]."
    n "But yes I do remember."
    n "You want my opinion, eh?"
    n jnb "It's... complicated..."
    n "The word itself is an offensive slur used against certain people."
    n "I'm guessing what you're asking is what I think of people calling me it?"
    n "People basically thought I was \"a boy in disguise\" or a transgender woman."
    n "Which, I'm not either of those..."
    n "I'm, just Natsuki..."
    n "I don't actually know why people thought that, maybe because I'm small and thin?"
    n jsb "But, well there's a reason for that..."
    n "..."
    n "Uh, anyway..."
    n jnb "I won't get into the whole thing about why it's really offensive to some people."
    n "Dan Salvato put it better than I could."
    n "Just, don't use it please..."
    n "It's really rude."
    jump ch30_loop

label ch30_attraction:
    n jnb "Honestly, I have no idea!"
    n "The game programmed me to love MC, who was male. But with this new freedom I don't really have preference."
    n "Hell, I don't even know what real people look like, well at least I don't have a clear idea."
    n "I guess you could say I'm attracted to anyone?"
    if persistent.player_gender == "Female" and persistent.natsuki_love:
        n "That's why I don't really have any worries about dating you, [player]."
        n "Even though you're a girl."
    n "There is a term for that right?"
    n "Liking anyone?"
    n "Sorry, I'm not super duper well versed on the LGBT community."
    n "Personally, I don't think it matters."
    n "Labels are for chumps."
    jump ch30_loop

default celebrate = None
label Natsuki_Christmas_ask_Player:
    n jnb "Hey, [player]."
    n "Do you celebrate Christmas?"
    menu:
        "Yes":
            $ celebrate = True
            n jha "Nice!"
        "No":
            $ celebrate = False
            n jnb "I see..."
    n jnb "Christmas is usually seen as a Christian holiday."
    n "It's in the name, {i}Christ{/i}mas."
    n "A lot of people who aren't Christian celebrate it now, though."
    n "I mean, it is a time for presents and happy times!"
    if celebrate:
        n jha "Plus, presents rule! I got my baking kit for Christmas one year."
        n "Same with my pink frilly skirt I wore when MC and I made cupcakes for the festival."
    else:
        n jha "Even though you don't celebrate, I'm sure you still like to enjoy the jolly feeling?"
        n "Plus, there are other holidays."
    return

default best_gift = ""

label Natsuki_Christmas_Bestgift:
    n jha "[player], what was the best gift you ever got for Christmas?"
    n "For me, it was probably the pink frilly skirt I wear sometimes."
    n "My friend Amy got it for me."
    n jnb "Yes, THAT Amy."
    n "Even though I wrote bad stuff about her in my poem, I actually don't have a problem with her."
    n jab "I'm not the kinda person to get angry at people for little things, like liking spiders!"
    menu:
        "You get angry whenever I call you cute...":
            pass
    n jaa "Urk-"
    n jac "I'm not cute!!"
    n jad "Grr..."
    n "Anyway..."
    n jnb "What was the best gift you've ever received?"
    $ gift = renpy.input('What was the best gift you ever got?',length=30).strip(' \t\n\r')
    $ best_gift = gift.strip()
    if "bike" in best_gift:
        n "A bike huh?"
        n "I never had one of those growing up."
        n jab "Always seemed like more of a boy thing, haha."
    elif "phone" in best_gift:
        n jha "Lucky!"
        n jnb "I have a phone, but it's kind of garbage."
        n jsa "Best my family could afford at the time was a flip phone."
        n jnb "It worked, but it was an old thing."
    elif best_gift == "boobs":
        n jac "???"
        n "What?!"
    elif best_gift == "clothes":
        if persistent.player_gender == "Female":
            n jha "A fashion girl I see."
        elif persistent.player_gender == "Male":
            n jha "A fashion guy I see."
        else:
            n jha "A fashion person I see."
        n "I like getting clothes sometimes."
        n "Though usually they're not really anything impressive."
        n jsa "We don't have a lot of money, so."
        n "It's hard to afford that kinda thing."
    else:
        n jnb "Oh, wow!"
        n "I've never had a [best_gift] before."
    return

label Natsuki_Christmas_TVshow :
    n jha "Did a show you like as a kid ever do a Christmas special?"
    n "God, those are so memorable."
    n "I would often just rewatch ones that had aired every year."
    n "They were just that memorable."
    n "I even watched them when it wasn't Christmas."
    n jnb "They were that enjoyable, I guess."
    return

label Natsuki_Christmas_Movie:
    n jab "What's with Christmas movies and being so darn cheesy."
    n "It's all \"Christmas spirit\" this, \"Peace to all\" that."
    n jnb "I mean, I don't dislike peace for all."
    n "But, still."
    n "Maybe my opinion comes from only watching kids' Christmas movies?"
    n "I usually watch those over more adult ones."
    n jaa "N-Not because I like childish things, I just used to watch them as a kid..."
    n "And... uh..."
    n jsb "..."
    return

label Natsuki_Christmas_Apologies:
    n jsb "[player] I'm sorry I couldn't do as much this year for Christmas."
    n "It's been... a hell of a year."
    n "I didn't have much time to work on the room."
    n "But, I hope to have something better for New Years."
    n jab "I do have some exciting stuff planned for next year."
    n "Stick around for that."
    return
